# æ–‡ä»¶ä¾è³´é—œä¿‚åœ–

**æ–‡æª”ç‰ˆæœ¬**: 1.0
**å»ºç«‹æ—¥æœŸ**: 2025-11-21
**é©ç”¨ç¯„åœ**: P0 æ¸¬è©¦ä¿®å¾©è¨ˆåŠƒ

---

## ğŸ“Š æ¦‚è¦½

æœ¬æ–‡æª”è©³ç´°è¨˜éŒ„ P0 æ¸¬è©¦ç›¸é—œçš„æ‰€æœ‰æ–‡ä»¶ä¾è³´é—œä¿‚ï¼Œå”åŠ©ç†è§£ä¿®å¾©å½±éŸ¿ç¯„åœå’Œå„ªå…ˆé †åºã€‚

### æ–‡ä»¶çµ±è¨ˆ

| é¡åˆ¥ | æ–‡ä»¶æ•¸ | éœ€ä¿®å¾© | å½±éŸ¿ç¨‹åº¦ |
|------|-------|--------|---------|
| Helper Functions | 4 | 1 | ğŸ”´ High |
| Test Specs | 3 | 3 | ğŸŸ¡ Medium |
| Configuration | 1 | 0 | ğŸŸ¢ Low |
| Total | 8 | 4 | - |

---

## ğŸ—‚ï¸ æ–‡ä»¶çµæ§‹æ¨¹

```
tests/
â”œâ”€â”€ helpers/                          # è¼”åŠ©å‡½æ•¸æ¨¡çµ„
â”‚   â”œâ”€â”€ navigation.ts                 âš ï¸ HIGH PRIORITY FIX
â”‚   â”‚   â”œâ”€â”€ getCurrentMode()          â† ä¸»è¦å•é¡Œé»
â”‚   â”‚   â”œâ”€â”€ enterRace()               â† æ­£å¸¸é‹ä½œ
â”‚   â”‚   â”œâ”€â”€ selectPigeon()            â† æ­£å¸¸é‹ä½œ
â”‚   â”‚   â”œâ”€â”€ openTrajectory()          â† æ­£å¸¸é‹ä½œ
â”‚   â”‚   â””â”€â”€ navigateToTrajectoryView() â† æ­£å¸¸é‹ä½œ
â”‚   â”‚
â”‚   â”œâ”€â”€ trajectory-reload.ts          âœ… FIXED (å·²ä¿®å¾©)
â”‚   â”‚   â””â”€â”€ reload2DTrajectory()      â† å°èˆªå•é¡Œå·²è§£æ±º
â”‚   â”‚
â”‚   â”œâ”€â”€ mode-switch.ts                ğŸ“ å¾…ç¢ºèªæ˜¯å¦å­˜åœ¨
â”‚   â”‚   â””â”€â”€ switchTo2D() / switchTo3D() â† å¦‚å­˜åœ¨ï¼Œå¯èƒ½éœ€æª¢æŸ¥
â”‚   â”‚
â”‚   â””â”€â”€ wait-utils.ts                 âœ… æ­£å¸¸é‹ä½œ
â”‚       â”œâ”€â”€ waitForMapReady()
â”‚       â”œâ”€â”€ waitForTrajectoryLoad()
â”‚       â””â”€â”€ waitForModeSwitch()
â”‚
â”œâ”€â”€ e2e/                              # E2E æ¸¬è©¦æ–‡ä»¶
â”‚   â”œâ”€â”€ tc-02-001-2d-static.spec.ts   âš ï¸ MEDIUM PRIORITY
â”‚   â”‚   â”œâ”€â”€ Line 60: Timeline button selector issue
â”‚   â”‚   â””â”€â”€ Line 129: Marker detection issue
â”‚   â”‚
â”‚   â”œâ”€â”€ tc-03-001-mode-switch.spec.ts âš ï¸ INVESTIGATION NEEDED
â”‚   â”‚   â”œâ”€â”€ ä¾è³´ getCurrentMode()
â”‚   â”‚   â””â”€â”€ 5 tests failing
â”‚   â”‚
â”‚   â””â”€â”€ tc-04-001-3d-mode.spec.ts     âš ï¸ BLOCKED BY HIGH PRIORITY
â”‚       â”œâ”€â”€ ä¾è³´ getCurrentMode()
â”‚       â””â”€â”€ 6 tests all failing
â”‚
â””â”€â”€ playwright.config.ts              âœ… æ­£å¸¸é‹ä½œ
    â””â”€â”€ å…¨å±€è¨­å®šï¼ˆtimeout, reporter, etc.ï¼‰
```

---

## ğŸ”— ä¾è³´é—œä¿‚çŸ©é™£

### Helper Functions â†’ Test Specs

| Helper Function | tc-02-001 | tc-03-001 | tc-04-001 | å„ªå…ˆç´š |
|----------------|-----------|-----------|-----------|-------|
| `getCurrentMode()` | - | âœ“âœ“âœ“ | âœ“âœ“âœ“âœ“âœ“âœ“ | ğŸ”´ Critical |
| `enterRace()` | âœ“ | âœ“ | âœ“ | ğŸŸ¢ Stable |
| `selectPigeon()` | âœ“ | âœ“ | âœ“ | ğŸŸ¢ Stable |
| `openTrajectory()` | âœ“ | âœ“ | âœ“ | ğŸŸ¢ Stable |
| `reload2DTrajectory()` | âœ“ | âœ“ | - | âœ… Fixed |
| `waitForMapReady()` | âœ“ | âœ“ | âœ“ | ğŸŸ¢ Stable |

**åœ–ä¾‹**:
- âœ“ = ä½¿ç”¨è©²å‡½æ•¸
- âœ“âœ“âœ“ = å¤šæ¬¡ä½¿ç”¨æˆ–é«˜åº¦ä¾è³´
- \- = ä¸ä½¿ç”¨

### ä¾è³´åš´é‡ç¨‹åº¦

```
getCurrentMode() [CRITICAL]
    â†“ ç›´æ¥é˜»å¡
    â”œâ”€â†’ tc-03-001 (5 tests) âš ï¸ 60% ä¾è³´æ­¤å‡½æ•¸
    â”‚   â”œâ”€â”€ Line 33: æ‡‰è©²æˆåŠŸåˆ‡æ›éœæ…‹â†’å‹•æ…‹â†’éœæ…‹
    â”‚   â”œâ”€â”€ Line 90: å‹•æ…‹æ¨¡å¼æ‡‰è©²é¡¯ç¤ºæ’­æ”¾æ§åˆ¶
    â”‚   â”œâ”€â”€ Line 111: å‹•æ…‹æ¨¡å¼æ’­æ”¾åŠŸèƒ½æ‡‰è©²æ­£å¸¸
    â”‚   â”œâ”€â”€ Line 144: æ‡‰è©²æ­£ç¢ºåµæ¸¬ç•¶å‰æ¨¡å¼
    â”‚   â””â”€â”€ Line 170: Canvas æ‡‰è©²åœ¨æ¨¡å¼åˆ‡æ›æ™‚æ›´æ–°
    â”‚
    â””â”€â†’ tc-04-001 (6 tests) âš ï¸ 100% ä¾è³´æ­¤å‡½æ•¸
        â”œâ”€â”€ Line 30: æ‡‰è©²æˆåŠŸåˆ‡æ›åˆ° 3D æ¨¡å¼ä¸¦æ¸²æŸ“
        â”œâ”€â”€ Line 81: Cesium å¼•æ“æ‡‰è©²æ­£ç¢ºåˆå§‹åŒ–
        â”œâ”€â”€ Line 115: è¦–è§’åˆ‡æ›åŠŸèƒ½æ‡‰è©²æ­£å¸¸
        â”œâ”€â”€ Line 137: 3D æ’­æ”¾æ§åˆ¶æ‡‰è©²å¯ç”¨
        â”œâ”€â”€ Line 166: æ‡‰è©²é¡¯ç¤ºè»Œè·¡é»æ§åˆ¶
        â””â”€â”€ Line 192: 3D å’Œ 2D æ¨¡å¼æ‡‰è©²å¯ä»¥ä¾†å›åˆ‡æ›
```

---

## ğŸ“ è©³ç´°æ–‡ä»¶èªªæ˜

### ğŸ”´ HIGH PRIORITY: navigation.ts

**è·¯å¾‘**: `tests/helpers/navigation.ts`
**è¡Œæ•¸**: 163 lines
**æœ€å¾Œä¿®æ”¹**: 2025-11-18

#### å°å‡ºå‡½æ•¸

| å‡½æ•¸åç¨± | è¡Œæ•¸ | ç‹€æ…‹ | ä½¿ç”¨æ¬¡æ•¸ |
|---------|-----|------|---------|
| `enterRace()` | 21-49 | âœ… æ­£å¸¸ | 16+ |
| `selectPigeon()` | 59-93 | âœ… æ­£å¸¸ | 16+ |
| `openTrajectory()` | 101-116 | âœ… æ­£å¸¸ | 16+ |
| `getCurrentMode()` | 124-142 | âŒ éŒ¯èª¤ | 11+ |
| `navigateToTrajectoryView()` | 152-162 | âœ… æ­£å¸¸ | 8+ |

#### getCurrentMode() å•é¡Œè©³æƒ…

**ç•¶å‰å¯¦ç¾**:
```typescript
// Line 124-142
export async function getCurrentMode(page: Page): Promise<'2D' | '3D' | 'unknown'> {
  // æª¢æŸ¥ 3D ç‰¹å¾µå…ƒç´ ï¼ˆè¦–è§’æŒ‰éˆ•ï¼‰
  const view1Button = page.getByRole('button', { name: 'è¦–è§’1' });
  const is3DMode = await view1Button.isVisible().catch(() => false);

  if (is3DMode) {
    return '3D';
  }

  // æª¢æŸ¥ 2D ç‰¹å¾µå…ƒç´ ï¼ˆ3Dæ¨¡å¼åˆ‡æ›æŒ‰éˆ•ï¼‰
  const mode3DButton = page.getByRole('button', { name: /3Dæ¨¡å¼/ });
  const is2DMode = await mode3DButton.isVisible().catch(() => false);

  if (is2DMode) {
    return '2D';
  }

  return 'unknown';
}
```

**å•é¡Œæ ¹æº**:
- æŒ‰éˆ•æ–‡å­—è¡¨ç¤ºã€Œç›®æ¨™æ¨¡å¼ã€è€Œéã€Œç•¶å‰æ¨¡å¼ã€
- "3Dæ¨¡å¼" æŒ‰éˆ•å‡ºç¾åœ¨ **2D æ¨¡å¼**ï¼ˆè¡¨ç¤ºå¯ä»¥åˆ‡æ›åˆ° 3Dï¼‰
- "2Dæ¨¡å¼" æŒ‰éˆ•å‡ºç¾åœ¨ **3D æ¨¡å¼**ï¼ˆè¡¨ç¤ºå¯ä»¥åˆ‡æ›åˆ° 2Dï¼‰
- ä½†ç¬¬äºŒå€‹æª¢æ¸¬æ²’æœ‰æª¢æŸ¥ "2Dæ¨¡å¼" æŒ‰éˆ•ï¼Œå°è‡´é‚è¼¯éŒ¯èª¤

**å½±éŸ¿ç¯„åœ**:
- ç›´æ¥å½±éŸ¿: 11 å€‹æ¸¬è©¦ (7 å€‹ 3D + 4 å€‹æ¨¡å¼åˆ‡æ›ç›¸é—œ)
- é–“æ¥å½±éŸ¿: å¯èƒ½å½±éŸ¿æ›´å¤šæ¸¬è©¦çš„æº–ç¢ºæ€§

**ä¿®å¾©å„ªå…ˆç´š**: ğŸ”´ **æœ€é«˜** - ä¿®å¾©å¾Œç«‹å³æ”¹å–„ 50% æ¸¬è©¦é€šéç‡

---

### âœ… FIXED: trajectory-reload.ts

**è·¯å¾‘**: `tests/helpers/trajectory-reload.ts`
**è¡Œæ•¸**: 185 lines
**æœ€å¾Œä¿®æ”¹**: 2025-11-21 (ä»Šæ—¥ä¿®å¾©)

#### ä¿®å¾©è¨˜éŒ„

**åŸå§‹å•é¡Œ**:
- å‡½æ•¸å‡è¨­å·²åœ¨é´¿å­åˆ—è¡¨é é¢
- ä½¿ç”¨ `page.goBack()` ç„¡æ³•å¯é è¿”å›
- 93.75% æ¸¬è©¦å¤±æ•—ç‡

**è§£æ±ºæ–¹æ¡ˆ**:
- ç›´æ¥æª¢æ¸¬è¡¨æ ¼å¯è¦‹æ€§
- å¯¦ç¾å¾Œå‚™å°èˆªç­–ç•¥ï¼ˆé‡æ–°é€²å…¥è³½äº‹ï¼‰
- å°èˆªæˆåŠŸç‡é”åˆ° 100%

**ä¿®å¾©æ•ˆæœ**:
- âœ… æ‰€æœ‰èª¿ç”¨æ­¤å‡½æ•¸çš„æ¸¬è©¦éƒ½èƒ½æˆåŠŸåŸ·è¡Œè»Œè·¡é‡è¼‰
- âœ… åœ°åœ–ç“¦ç‰‡ç©©å®šåœ¨ 139 å€‹
- âœ… Canvas åœ–å±¤ç©©å®šåœ¨ 1 å±¤

**å¯å€Ÿé‘‘ç¶“é©—**:
- å¤šé‡æª¢æ¸¬ç­–ç•¥
- è©³ç´°çš„æ—¥èªŒè¼¸å‡º
- ç©©å¥çš„å¾Œå‚™æ–¹æ¡ˆ

---

### âš ï¸ MEDIUM PRIORITY: tc-02-001-2d-static.spec.ts

**è·¯å¾‘**: `tests/e2e/tc-02-001-2d-static.spec.ts`
**è¡Œæ•¸**: 155 lines
**æ¸¬è©¦æ•¸**: 5 å€‹æ¸¬è©¦
**é€šé**: 2 å€‹
**å¤±æ•—**: 2 å€‹
**è·³é**: 1 å€‹

#### å¤±æ•—æ¸¬è©¦è©³æƒ…

**Test 1: æ‡‰è©²æ­£ç¢ºæ¸²æŸ“ 2D éœæ…‹è»Œè·¡** (Line 37)
- **å•é¡Œä½ç½®**: Line 60
- **å•é¡Œä»£ç¢¼**:
  ```typescript
  const timelineButton = page.locator('button:has(img[alt="timeline"])');
  await expect(timelineButton).toBeVisible({ timeout: 5000 });
  ```
- **éŒ¯èª¤**: Selector æ‰¾ä¸åˆ°å…ƒç´ æˆ–è¶…æ™‚
- **é ä¼°ä¿®å¾©æ™‚é–“**: 15-20 åˆ†é˜
- **ä¿®å¾©æ–¹æ³•**: ä½¿ç”¨ Playwright Inspector ç¢ºèªå¯¦éš› selector

**Test 2: æ‡‰è©²æ­£ç¢ºé¡¯ç¤ºèµ·é»å’Œçµ‚é»æ¨™è¨˜** (Line 126)
- **å•é¡Œä½ç½®**: Line 129
- **å•é¡Œä»£ç¢¼**:
  ```typescript
  // å…·é«”ä»£ç¢¼å¾…æª¢è¦–
  // å¯èƒ½æ˜¯ marker æª¢æ¸¬é‚è¼¯
  ```
- **éŒ¯èª¤**: Marker æª¢æ¸¬å¤±æ•—
- **é ä¼°ä¿®å¾©æ™‚é–“**: 15-20 åˆ†é˜
- **ä¿®å¾©æ–¹æ³•**: æª¢æŸ¥æ˜¯å¦ç‚º Canvas æ¸²æŸ“ï¼Œå¯èƒ½éœ€è¦è¦–è¦ºé©—è­‰æˆ– API é©—è­‰

#### ä¾è³´çš„ Helper Functions

```typescript
import { enterRace } from '../helpers/navigation';
import { reload2DTrajectory } from '../helpers/trajectory-reload';
import { waitForMapReady } from '../helpers/wait-utils';
```

**ä¾è³´ç‹€æ…‹**:
- âœ… `enterRace` - æ­£å¸¸
- âœ… `reload2DTrajectory` - å·²ä¿®å¾©
- âœ… `waitForMapReady` - æ­£å¸¸

**ä¿®å¾©å„ªå…ˆç´š**: ğŸŸ¡ **ä¸­** - ç¨ç«‹å•é¡Œï¼Œä¸å½±éŸ¿å…¶ä»–æ¸¬è©¦

---

### âš ï¸ INVESTIGATION NEEDED: tc-03-001-mode-switch.spec.ts

**è·¯å¾‘**: `tests/e2e/tc-03-001-mode-switch.spec.ts`
**è¡Œæ•¸**: 220 lines
**æ¸¬è©¦æ•¸**: 6 å€‹æ¸¬è©¦
**é€šé**: 0 å€‹
**å¤±æ•—**: 6 å€‹

#### å¤±æ•—æ¸¬è©¦åˆ—è¡¨

| Test Line | Test Name | ä¾è³´ getCurrentMode | é ä¼°å¯ä¿®å¾© |
|-----------|-----------|-------------------|-----------|
| 33 | æ‡‰è©²æˆåŠŸåˆ‡æ›éœæ…‹â†’å‹•æ…‹â†’éœæ…‹ | âœ“ | âœ“ å¯èƒ½ |
| 90 | å‹•æ…‹æ¨¡å¼æ‡‰è©²é¡¯ç¤ºæ’­æ”¾æ§åˆ¶ | âœ“ | âœ“ å¯èƒ½ |
| 111 | å‹•æ…‹æ¨¡å¼æ’­æ”¾åŠŸèƒ½æ‡‰è©²æ­£å¸¸ | âœ“ | ? å¾…èª¿æŸ¥ |
| 144 | æ‡‰è©²æ­£ç¢ºåµæ¸¬ç•¶å‰æ¨¡å¼ | âœ“âœ“âœ“ | âœ“ ç¢ºå®š |
| 170 | Canvas æ‡‰è©²åœ¨æ¨¡å¼åˆ‡æ›æ™‚æ›´æ–° | âœ“ | âœ“ å¯èƒ½ |

#### ä¾è³´åˆ†æ

**ç›´æ¥ä¾è³´**: `getCurrentMode()`
- æ‰€æœ‰ 6 å€‹æ¸¬è©¦éƒ½èª¿ç”¨æ­¤å‡½æ•¸
- ä¿®å¾© `getCurrentMode()` å¾Œï¼Œé ä¼°è‡³å°‘ 4 å€‹æ¸¬è©¦æœƒé€šé

**å…¶ä»–ä¾è³´**:
```typescript
import { enterRace, getCurrentMode } from '../helpers/navigation';
import { reload2DTrajectory } from '../helpers/trajectory-reload';
import { waitForModeSwitch } from '../helpers/wait-utils';
```

**ä¿®å¾©å„ªå…ˆç´š**: ğŸŸ¡ **ä¸­é«˜** - éœ€å…ˆä¿®å¾© getCurrentMode()ï¼Œå†é€ä¸€èª¿æŸ¥

---

### âš ï¸ BLOCKED: tc-04-001-3d-mode.spec.ts

**è·¯å¾‘**: `tests/e2e/tc-04-001-3d-mode.spec.ts`
**è¡Œæ•¸**: 250 lines
**æ¸¬è©¦æ•¸**: 6 å€‹æ¸¬è©¦
**é€šé**: 0 å€‹
**å¤±æ•—**: 6 å€‹

#### é˜»å¡åŸå› 

**æ‰€æœ‰æ¸¬è©¦çš„é€šç”¨å•é¡Œ**:
```
ğŸ“ ç•¶å‰æ¨¡å¼æŒ‰éˆ•é¡¯ç¤ºï¼š2d  2Dæ¨¡å¼  â† æŒ‰éˆ•æ–‡å­—é¡¯ç¤ºåœ¨ 3D æ¨¡å¼
âœ… å·²åœ¨ 3D æ¨¡å¼ï¼Œç„¡éœ€åˆ‡æ›           â† ä½†åˆ¤æ–·ç‚ºåœ¨ 3Dï¼ˆéŒ¯èª¤ï¼ï¼‰
```

å¯¦éš›ä¸Šç•¶å‰åœ¨ **3D æ¨¡å¼**ï¼Œä½† `getCurrentMode()` è¿”å› "unknown" æˆ–éŒ¯èª¤å€¼ï¼Œå°è‡´ï¼š
1. ç„¡æ³•æ­£ç¢ºåˆ‡æ›åˆ° 3D æ¨¡å¼
2. å¾ŒçºŒæ‰€æœ‰ 3D åŠŸèƒ½æ¸¬è©¦éƒ½å¤±æ•—

#### å¤±æ•—æ¸¬è©¦åˆ—è¡¨

| Test Line | Test Name | é˜»å¡åŸå›  |
|-----------|-----------|---------|
| 30 | æ‡‰è©²æˆåŠŸåˆ‡æ›åˆ° 3D æ¨¡å¼ä¸¦æ¸²æŸ“ | getCurrentMode() éŒ¯èª¤ |
| 81 | Cesium å¼•æ“æ‡‰è©²æ­£ç¢ºåˆå§‹åŒ– | ç„¡æ³•é€²å…¥ 3D æ¨¡å¼ |
| 115 | è¦–è§’åˆ‡æ›åŠŸèƒ½æ‡‰è©²æ­£å¸¸ | ç„¡æ³•é€²å…¥ 3D æ¨¡å¼ |
| 137 | 3D æ’­æ”¾æ§åˆ¶æ‡‰è©²å¯ç”¨ | ç„¡æ³•é€²å…¥ 3D æ¨¡å¼ |
| 166 | æ‡‰è©²é¡¯ç¤ºè»Œè·¡é»æ§åˆ¶ | ç„¡æ³•é€²å…¥ 3D æ¨¡å¼ |
| 192 | 3D å’Œ 2D æ¨¡å¼æ‡‰è©²å¯ä»¥ä¾†å›åˆ‡æ› | ç„¡æ³•é€²å…¥ 3D æ¨¡å¼ |

#### é æœŸä¿®å¾©æ•ˆæœ

**ä¿®å¾© getCurrentMode() å¾Œ**:
- âœ“ 100% çš„æ¸¬è©¦æ‡‰è©²æœƒé€šé (6/6)
- âœ“ ç„¡éœ€é¡å¤–ä¿®æ”¹æ¸¬è©¦æ–‡ä»¶æœ¬èº«
- âœ“ ç«‹å³æ”¹å–„ 37.5% çš„ç¸½é«”é€šéç‡

**ä¿®å¾©å„ªå…ˆç´š**: ğŸ”´ **æœ€é«˜** - 100% ä¾è³´ getCurrentMode()

---

## ğŸ¯ ä¿®å¾©å½±éŸ¿åˆ†æ

### Scenario 1: åªä¿®å¾© getCurrentMode()

```
ä¿®å¾©å‰ç‹€æ…‹:
  tc-02-001: âœ“âœ“âœ—âœ—âœ— (40%)
  tc-03-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  tc-04-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  ç¸½è¨ˆ: 2/16 (12.5%)

ä¿®å¾©å¾Œé æœŸ:
  tc-02-001: âœ“âœ“âœ—âœ—âœ— (40%) â† ä¸è®Š
  tc-03-001: âœ“âœ—âœ—âœ—âœ—âœ— (17%) â† +1 æ¸¬è©¦ï¼ˆmode detectionï¼‰
  tc-04-001: âœ“âœ“âœ“âœ“âœ“âœ“ (100%) â† +6 æ¸¬è©¦ï¼ˆå…¨éƒ¨é€šéï¼‰
  ç¸½è¨ˆ: 9/16 (56.25%)

æ”¹å–„å¹…åº¦: +43.75 ç™¾åˆ†é»
```

### Scenario 2: ä¿®å¾© getCurrentMode() + Selectors

```
ä¿®å¾©å‰ç‹€æ…‹:
  tc-02-001: âœ“âœ“âœ—âœ—âœ— (40%)
  tc-03-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  tc-04-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  ç¸½è¨ˆ: 2/16 (12.5%)

ä¿®å¾©å¾Œé æœŸ:
  tc-02-001: âœ“âœ“âœ“âœ“âœ— (80%) â† +2 æ¸¬è©¦ï¼ˆselectors ä¿®å¾©ï¼‰
  tc-03-001: âœ“âœ—âœ—âœ—âœ—âœ— (17%) â† +1 æ¸¬è©¦ï¼ˆmode detectionï¼‰
  tc-04-001: âœ“âœ“âœ“âœ“âœ“âœ“ (100%) â† +6 æ¸¬è©¦ï¼ˆå…¨éƒ¨é€šéï¼‰
  ç¸½è¨ˆ: 11/16 (68.75%)

æ”¹å–„å¹…åº¦: +56.25 ç™¾åˆ†é»
```

### Scenario 3: å®Œæ•´ä¿®å¾©æ‰€æœ‰å•é¡Œ

```
ä¿®å¾©å‰ç‹€æ…‹:
  tc-02-001: âœ“âœ“âœ—âœ—âœ— (40%)
  tc-03-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  tc-04-001: âœ—âœ—âœ—âœ—âœ—âœ— (0%)
  ç¸½è¨ˆ: 2/16 (12.5%)

ä¿®å¾©å¾Œé æœŸï¼ˆæ¨‚è§€ï¼‰:
  tc-02-001: âœ“âœ“âœ“âœ“âœ— (80%) â† +2 æ¸¬è©¦
  tc-03-001: âœ“âœ“âœ“âœ“âœ“âœ“ (100%) â† +6 æ¸¬è©¦ï¼ˆå…¨éƒ¨ä¿®å¾©ï¼‰
  tc-04-001: âœ“âœ“âœ“âœ“âœ“âœ“ (100%) â† +6 æ¸¬è©¦
  ç¸½è¨ˆ: 14/16 (87.5%)

ä¿®å¾©å¾Œé æœŸï¼ˆä¿å®ˆï¼‰:
  tc-02-001: âœ“âœ“âœ“âœ“âœ— (80%) â† +2 æ¸¬è©¦
  tc-03-001: âœ“âœ“âœ“âœ—âœ—âœ— (50%) â† +3 æ¸¬è©¦ï¼ˆéƒ¨åˆ†ä¿®å¾©ï¼‰
  tc-04-001: âœ“âœ“âœ“âœ“âœ“âœ“ (100%) â† +6 æ¸¬è©¦
  ç¸½è¨ˆ: 13/16 (81.25%)

æ”¹å–„å¹…åº¦: 68.75-75 ç™¾åˆ†é»
```

---

## ğŸ“Š ä¿®å¾©å„ªå…ˆç´šçŸ©é™£

### ROI (æŠ•è³‡å ±é…¬ç‡) åˆ†æ

| ä¿®å¾©é …ç›® | æ™‚é–“æŠ•å…¥ | é æœŸæ”¹å–„ | ROI åˆ†æ•¸ | å„ªå…ˆç´š |
|---------|---------|---------|---------|-------|
| getCurrentMode() | 30-60 min | +7 tests (43.75%) | ğŸŸ¢ **9.0/10** | ğŸ”´ P0 |
| TC-02-001 Selectors | 20-40 min | +2 tests (12.5%) | ğŸŸ¡ **6.0/10** | ğŸŸ¡ P1 |
| TC-03-001 èª¿æŸ¥ä¿®å¾© | 1-2 hours | +2-5 tests (12.5-31.25%) | ğŸŸ¡ **5.0/10** | ğŸŸ¢ P2 |

### æ¨è–¦åŸ·è¡Œé †åº

```
ç¬¬ä¸€å„ªå…ˆ: getCurrentMode() ä¿®å¾©
    â†“ (30-60 åˆ†é˜)
    â”œâ”€â†’ ç«‹å³æ”¹å–„ 43.75%
    â””â”€â†’ è§£é™¤ tc-04-001 æ‰€æœ‰æ¸¬è©¦çš„é˜»å¡

ç¬¬äºŒå„ªå…ˆ: TC-02-001 Selectors
    â†“ (20-40 åˆ†é˜)
    â”œâ”€â†’ é¡å¤–æ”¹å–„ 12.5%
    â””â”€â†’ ç´¯è¨ˆé”åˆ° 68.75% é€šéç‡

ç¬¬ä¸‰å„ªå…ˆ: TC-03-001 é€ä¸€èª¿æŸ¥
    â†“ (1-2 å°æ™‚ï¼Œè¦–å¯¦éš›æƒ…æ³èª¿æ•´)
    â”œâ”€â†’ å¯èƒ½é¡å¤–æ”¹å–„ 12.5-31.25%
    â””â”€â†’ ç›®æ¨™é”åˆ° 87.5% ä»¥ä¸Šé€šéç‡
```

---

## ğŸ”„ æ–‡ä»¶ä¿®æ”¹è¨ˆåŠƒ

### Phase 1 ä¿®æ”¹

**æ–‡ä»¶**: `tests/helpers/navigation.ts`
- **è¡Œæ•¸**: 124-142
- **ä¿®æ”¹å…§å®¹**: æ›¿æ› `getCurrentMode()` å‡½æ•¸
- **å½±éŸ¿ç¯„åœ**: 11 å€‹æ¸¬è©¦
- **é¢¨éšªç­‰ç´š**: ğŸŸ¡ Mediumï¼ˆéœ€è¦å®Œæ•´æ¸¬è©¦é©—è­‰ï¼‰
- **å›æ»¾ç­–ç•¥**: å·²æº–å‚™ `.backup` æª”æ¡ˆ

### Phase 2 ä¿®æ”¹

**æ–‡ä»¶ 1**: `tests/e2e/tc-02-001-2d-static.spec.ts`
- **è¡Œæ•¸**: Line 60, Line 129
- **ä¿®æ”¹å…§å®¹**: æ›´æ–° Timeline button å’Œ Marker selectors
- **å½±éŸ¿ç¯„åœ**: 2 å€‹æ¸¬è©¦
- **é¢¨éšªç­‰ç´š**: ğŸŸ¢ Lowï¼ˆç¨ç«‹ä¿®æ”¹ï¼‰
- **å›æ»¾ç­–ç•¥**: Git commit åˆ†é–‹ï¼Œæ˜“æ–¼å›æ»¾

### Phase 3 ä¿®æ”¹

**æ–‡ä»¶**: `tests/e2e/tc-03-001-mode-switch.spec.ts`
- **è¡Œæ•¸**: å¾…ç¢ºå®šï¼ˆéœ€å…ˆèª¿æŸ¥ï¼‰
- **ä¿®æ”¹å…§å®¹**: æ ¹æ“šå¯¦éš›éŒ¯èª¤è¨Šæ¯æ±ºå®š
- **å½±éŸ¿ç¯„åœ**: 4-5 å€‹æ¸¬è©¦
- **é¢¨éšªç­‰ç´š**: ğŸŸ¡ Mediumï¼ˆéœ€é€ä¸€é©—è­‰ï¼‰
- **å›æ»¾ç­–ç•¥**: æ¯å€‹ä¿®æ”¹ç¨ç«‹ commit

---

## ğŸ“š åƒè€ƒè³‡æº

### ç›¸é—œæ–‡æª”

- **æ¸¬è©¦è¨ˆåŠƒ**: `docs/test-plan/TEST_CASES.md`
- **æ¸¬è©¦ç­–ç•¥**: `docs/guides/testing-strategies.md`
- **æ•…éšœæ’é™¤**: `docs/guides/troubleshooting.md`
- **æ¶æ§‹æ–‡æª”**: `docs/architecture/test-framework.md`

### Playwright å®˜æ–¹æ–‡æª”

- **Selectors**: https://playwright.dev/docs/selectors
- **Locators**: https://playwright.dev/docs/locators
- **Best Practices**: https://playwright.dev/docs/best-practices
- **Test Isolation**: https://playwright.dev/docs/test-isolation

### å°ˆæ¡ˆç‰¹å®šè³‡æº

- **ä¿®å¾©è¨ˆåŠƒ**: `dev/FIX_PLAN.md`
- **å¯¦æ–½è¨˜éŒ„**: `dev/implementation-log.md`
- **æ¸¬è©¦å ±å‘Š**: `test-summary-report.md`

---

## âœ… æª¢æŸ¥æ¸…å–®

### æ–‡ä»¶ä¾è³´ç¢ºèª
- [x] å·²è­˜åˆ¥æ‰€æœ‰ç›¸é—œ helper functions
- [x] å·²è­˜åˆ¥æ‰€æœ‰ç›¸é—œ test specs
- [x] å·²å»ºç«‹ä¾è³´é—œä¿‚çŸ©é™£
- [x] å·²åˆ†æä¿®å¾©å½±éŸ¿ç¯„åœ

### å„ªå…ˆç´šç¢ºèª
- [x] å·²æ ¹æ“š ROI æ’åºä¿®å¾©å„ªå…ˆç´š
- [x] å·²è­˜åˆ¥é˜»å¡é—œä¿‚
- [x] å·²è¦åŠƒä¿®å¾©é †åº

### é¢¨éšªè©•ä¼°
- [x] å·²è­˜åˆ¥é«˜é¢¨éšªä¿®æ”¹é»
- [x] å·²æº–å‚™å›æ»¾ç­–ç•¥
- [x] å·²è¦åŠƒé©—è­‰æ­¥é©Ÿ

---

**æ–‡æª”å®Œæˆæ—¥æœŸ**: 2025-11-21
**ä¸‹æ¬¡æ›´æ–°**: ä¿®å¾©å®Œæˆå¾Œæ›´æ–°å¯¦éš›çµæœ
