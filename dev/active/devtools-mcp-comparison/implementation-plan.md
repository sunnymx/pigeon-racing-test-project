# Chrome DevTools MCP å¯¦ä½œè¨ˆåŠƒ

**å»ºç«‹æ—¥æœŸ**: 2025-11-28
**æœ€å¾Œæ›´æ–°**: 2025-11-28
**ç‹€æ…‹**: ğŸš§ Phase 1 å®Œæˆ (100%)ï¼ŒPhase 2 å¾…é–‹å§‹

---

## 1. ç›®æ¨™

å»ºç«‹ Chrome DevTools MCP ä¸¦è¡Œå¯¦ä½œï¼Œèˆ‡ç¾æœ‰ Playwright é€²è¡Œæ•ˆèƒ½/ç©©å®šæ€§/åµéŒ¯/é–‹ç™¼é«”é©—å°æ¯”ã€‚

---

## 2. ç›®éŒ„çµæ§‹

```
tests/
â”œâ”€â”€ helpers/                      # ç¾æœ‰ Playwright (ä¿ç•™ä¸å‹•)
â”œâ”€â”€ helpers-devtools/             # æ–°å»º DevTools MCP ç‰ˆæœ¬
â”‚   â”œâ”€â”€ devtools-core.ts          # DevTools æ ¸å¿ƒå·¥å…· (~150 è¡Œ)
â”‚   â”œâ”€â”€ navigation.ts             # (~180 è¡Œ)
â”‚   â”œâ”€â”€ mode-switching.ts         # (~250 è¡Œ)
â”‚   â”œâ”€â”€ wait-utils.ts             # (~200 è¡Œ)
â”‚   â”œâ”€â”€ trajectory-utils.ts       # (~280 è¡Œ)
â”‚   â”œâ”€â”€ trajectory-reload.ts      # (~180 è¡Œ)
â”‚   â””â”€â”€ loft-list.ts              # (~200 è¡Œ)
â”œâ”€â”€ e2e/                          # ç¾æœ‰ Playwright æ¸¬è©¦
â”œâ”€â”€ e2e-devtools/                 # æ–°å»º DevTools MCP æ¸¬è©¦
â”‚   â”œâ”€â”€ tc-02-001-2d-static.devtools.ts
â”‚   â”œâ”€â”€ tc-03-001-mode-switch.devtools.ts
â”‚   â””â”€â”€ tc-04-001-3d-mode.devtools.ts
â”œâ”€â”€ comparison/                   # å°æ¯”åŸºç¤è¨­æ–½
â”‚   â”œâ”€â”€ benchmark-runner.ts
â”‚   â”œâ”€â”€ metrics-collector.ts
â”‚   â””â”€â”€ report-generator.ts
â””â”€â”€ shared/
    â”œâ”€â”€ types.ts                  # å…±ç”¨å‹åˆ¥
    â””â”€â”€ validators.ts             # å…±ç”¨é©—è­‰å™¨ (ç„¡ç€è¦½å™¨ä¾è³´)
```

---

## 3. åŸ·è¡Œæ–¹å¼

**å…©éšæ®µç­–ç•¥**:
1. **äº’å‹•å¼é©—è­‰** - é€é Claude Code å°è©±åŸ·è¡Œ DevTools MCP å·¥å…·ï¼Œå¿«é€Ÿé©—è­‰å¯è¡Œæ€§
2. **è…³æœ¬å¼è‡ªå‹•åŒ–** - é©—è­‰æˆåŠŸå¾Œè½‰ç‚º Node.js è…³æœ¬ï¼Œæ”¯æ´ CI æ•´åˆ

```
äº’å‹•å¼ (Claude Code)          è…³æœ¬å¼ (Node.js)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ mcp__chrome-    â”‚          â”‚ import { ... }  â”‚
â”‚ devtools__click â”‚    â†’     â”‚ from 'devtools' â”‚
â”‚ (æ‰‹å‹•è§¸ç™¼)       â”‚          â”‚ (è‡ªå‹•åŸ·è¡Œ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. å¯¦ä½œé †åº

### Phase 1: åŸºç¤å»ºè¨­ (1-2 å¤©) âœ… å®Œæˆ

| é †åº | ä»»å‹™ | é ä¼°è¡Œæ•¸ | å¯¦éš›è¡Œæ•¸ | ç‹€æ…‹ |
|------|------|----------|----------|------|
| 1.1 | è¨­å®š Chrome DevTools MCP (`claude mcp add`) | - | - | âœ… |
| 1.2 | äº’å‹•å¼é©—è­‰æ ¸å¿ƒ API (navigate, click, snapshot) | - | - | âœ… |
| 1.3 | å»ºç«‹ `devtools-core.ts` æ ¸å¿ƒå·¥å…· | ~150 | 188 | âœ… |
| 1.4 | å»ºç«‹ `shared/types.ts` | ~50 | 72 | âœ… |

**Phase 1 ç¸½è¨ˆ**: 260 è¡Œ (é ä¼° 200 è¡Œ)

### Phase 2: Helper è½‰æ› (3-5 å¤©)

| é †åº | æ¨¡çµ„ | é ä¼°è¡Œæ•¸ | ä¾è³´ |
|------|------|----------|------|
| 2.1 | `navigation.ts` | ~180 | devtools-core |
| 2.2 | `wait-utils.ts` | ~200 | devtools-core |
| 2.3 | `mode-switching.ts` | ~250 | navigation, wait-utils |
| 2.4 | `trajectory-utils.ts` | ~280 | devtools-core, wait-utils |
| 2.5 | `trajectory-reload.ts` | ~180 | navigation, mode-switching |
| 2.6 | `loft-list.ts` | ~200 | devtools-core, navigation |

### Phase 3: æ¸¬è©¦è½‰æ› (2-3 å¤©)

| é †åº | æ¸¬è©¦æ¡ˆä¾‹ | é ä¼°è¡Œæ•¸ |
|------|----------|----------|
| 3.1 | TC-02-001 (2D éœæ…‹) | ~150 |
| 3.2 | TC-03-001 (æ¨¡å¼åˆ‡æ›) | ~200 |
| 3.3 | TC-04-001 (3D æ¨¡å¼) | ~220 |

### Phase 4: å°æ¯”èˆ‡å ±å‘Š (2 å¤©)

| é †åº | ä»»å‹™ | é ä¼°è¡Œæ•¸ |
|------|------|----------|
| 4.1 | å»ºç«‹ benchmark-runner | ~150 |
| 4.2 | å»ºç«‹ metrics-collector | ~100 |
| 4.3 | å»ºç«‹ report-generator | ~100 |
| 4.4 | åŸ·è¡Œå®Œæ•´å°æ¯” | - |
| 4.5 | ç”¢ç”Ÿæœ€çµ‚å ±å‘Š | - |

---

## 5. å°æ¯”æŒ‡æ¨™

| é¢å‘ | æŒ‡æ¨™ | æ”¶é›†æ–¹å¼ |
|------|------|----------|
| **é€Ÿåº¦** | æ¸¬è©¦åŸ·è¡Œæ™‚é–“ | `performance.now()` |
| **ç©©å®šæ€§** | é€šéç‡ã€Flaky ç‡ã€é‡è©¦æ¬¡æ•¸ | å¤šæ¬¡åŸ·è¡Œçµ±è¨ˆ |
| **åµéŒ¯** | æ•ˆèƒ½è¿½è¹¤ã€ç¶²è·¯è©³æƒ…ã€éŒ¯èª¤è¨ºæ–· | DevTools ç¨ç‰¹ API |
| **é–‹ç™¼é«”é©—** | ç¨‹å¼ç¢¼è¡Œæ•¸ã€è¤‡é›œåº¦ã€API å‘¼å«æ¬¡æ•¸ | ç¨‹å¼ç¢¼åˆ†æ |

---

## 6. é¢¨éšªèˆ‡å°ç­–

| é¢¨éšª | å½±éŸ¿ | å°ç­– |
|------|------|------|
| Canvas å…ƒç´ ä¸åœ¨ a11y æ¨¹ | ç„¡æ³•èˆ‡åœ°åœ–æ¨™è¨˜äº’å‹• | ä½¿ç”¨ `evaluate_script` æ“ä½œ |
| æ²™ç›’ç’°å¢ƒä¸ç›¸å®¹ | DevTools MCP ç„¡æ³•å•Ÿå‹• | æå‰æ¸¬è©¦ï¼Œæº–å‚™å‚™æ¡ˆ |
| ç­‰å¾…ç­–ç•¥å·®ç•° | æ¸¬è©¦éœ€è¦ä¸åŒç­‰å¾…é‚è¼¯ | å»ºç«‹è‡ªé©æ‡‰ç­‰å¾…å·¥å…· |
| a11y æ¨¹è§£æè¤‡é›œ | å…ƒç´ å®šä½ä»£ç¢¼æ›´è¤‡é›œ | å»ºç«‹ç©©å¥çš„è§£æå·¥å…· |

---

## 7. é ä¼°å·¥ä½œé‡

| éšæ®µ | å¤©æ•¸ | ç¨‹å¼ç¢¼è¡Œæ•¸ |
|------|------|-----------|
| åŸºç¤å»ºè¨­ | 2 | ~400 |
| Helper è½‰æ› | 3-5 | ~1,290 |
| æ¸¬è©¦è½‰æ› | 2-3 | ~570 |
| å°æ¯”å ±å‘Š | 2 | ~350 |
| **ç¸½è¨ˆ** | **10 å¤©** | **~2,610 è¡Œ** |

---

## 8. é—œéµåƒè€ƒæª”æ¡ˆ

å¯¦ä½œæ™‚éœ€åƒè€ƒ:
- `tests/helpers/navigation.ts` - å°èˆªæ¨¡å¼
- `tests/helpers/mode-switching.ts` - æ¨¡å¼åµæ¸¬é‚è¼¯
- `tests/helpers/wait-utils.ts` - ç­‰å¾…ç­–ç•¥
- `tests/e2e/tc-02-001-2d-static.spec.ts` - æ¸¬è©¦çµæ§‹åƒè€ƒ
- `docs/architecture/test-framework.md` - æ¶æ§‹åŸå‰‡

---

## 9. æˆåŠŸæ¨™æº–

### æœ€ä½æ¨™æº–
- [ ] æ‰€æœ‰ 3 å€‹ P0 æ¸¬è©¦æ¡ˆä¾‹è½‰æ›ä¸¦é€šé
- [ ] æ‰€æœ‰ 7 å€‹ Helper æ¨¡çµ„è½‰æ›å®Œæˆ
- [ ] æ”¶é›†æ‰€æœ‰æ¸¬è©¦æ¡ˆä¾‹çš„å°æ¯”æŒ‡æ¨™
- [ ] ç”¢ç”Ÿæœ€çµ‚å°æ¯”å ±å‘Š

### ç›®æ¨™æ¨™æº–
- [ ] DevTools MCP é”åˆ°å¯æ¯”ç©©å®šæ€§ï¼ˆèˆ‡ Playwright ç›¸å·® 5% å…§ï¼‰
- [ ] æ•ˆèƒ½è¿½è¹¤æä¾›å¯æ“ä½œçš„æ´å¯Ÿ
- [ ] ç¶²è·¯æª¢æŸ¥æä¾›æ¯” Playwright æ›´å¤šç´°ç¯€
- [ ] ç¨‹å¼ç¢¼è¤‡é›œåº¦å¢åŠ å°‘æ–¼ 30%

---

## 10. åƒè€ƒè³‡æ–™

- [Chrome DevTools MCP GitHub](https://github.com/ChromeDevTools/chrome-devtools-mcp)
- [Chrome DevTools MCP å·¥å…·åƒè€ƒ](https://github.com/ChromeDevTools/chrome-devtools-mcp/blob/main/docs/tool-reference.md)
