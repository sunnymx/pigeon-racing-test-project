# 規格文檔更新檢查清單

## 階段 1: 分析與驗證 (Pre-Update Analysis)

### 1.1 讀取現有文檔

- [ ] 讀取主規格文檔（最新版本）
- [ ] 識別當前版本號（從標題和元資訊）
- [ ] 讀取 README.md 索引文檔
- [ ] 記錄現有文件結構

### 1.2 版本歷史結構檢查

- [ ] 檢查是否存在「版本歷史 (Version History)」章節
- [ ] 檢查版本歷史表格格式是否符合標準
- [ ] 檢查是否定義「版本編號規則」
- [ ] 檢查是否有「版本更新摘要（快速索引）」

### 1.3 文檔結構驗證

- [ ] 驗證文檔標題格式：`# {標題} - {spec-name} v{version}`
- [ ] 驗證是否有「文件說明」章節
- [ ] 驗證是否有目錄結構
- [ ] 驗證底部是否有文檔元資訊

### 1.4 README.md 結構檢查

- [ ] 檢查是否有「目錄結構」章節
- [ ] 檢查是否有「版本索引」章節
- [ ] 檢查底部是否有文檔元資訊

## 階段 2: 版本歷史記錄 (Version History Update)

### 2.1 創建/更新版本歷史表格

如果不存在版本歷史章節：
- [ ] 在文檔開頭（文件說明之後）創建「📝 版本歷史 (Version History)」章節
- [ ] 創建版本歷史表格（包含表頭）
- [ ] 添加「版本編號規則」說明
- [ ] 添加當前版本和歷史版本記錄

如果已存在版本歷史：
- [ ] 在表格第一行（表頭之後）插入新版本記錄
- [ ] 填寫：版本號 | 發布日期 | 變更類型 | 變更摘要 | 變更詳情

### 2.2 添加詳細變更說明

- [ ] 創建「vX.Y 版本變更詳細說明」章節
- [ ] 填寫「變更背景」
- [ ] 填寫「硬體/軟體環境」（如適用）
- [ ] 列出「關鍵變更」，包含修正前/後對照
- [ ] 添加「精度/性能比較」（如適用）

### 2.3 驗證版本歷史完整性

- [ ] 確認版本號格式正確 (vX.Y 或 vX.Y.Z)
- [ ] 確認發布日期為今天 (ISO 8601 格式)
- [ ] 確認變更類型圖示和名稱匹配
- [ ] 確認變更詳情使用 `<br>` 換行
- [ ] 確認變更摘要清晰具體（15-30 字）

## 階段 3: 版本號更新 (Version Number Update)

### 3.1 更新主規格文檔版本號

- [ ] 更新主標題：`# {標題} v{new_version}`
- [ ] 更新文件說明：`本文件定義...規格 **v{new_version} 版本**。`
- [ ] 更新版本更新摘要（快速索引）章節標題

### 3.2 更新版本更新摘要

- [ ] 在「版本更新摘要（快速索引）」添加新版本項目
- [ ] 列出新版本 3-5 個主要變更
- [ ] 保留上一版本的摘要（用於對比）

### 3.3 更新文檔元資訊

- [ ] 更新底部「文件版本」：`{new_version}`
- [ ] 更新「更新日期」：`YYYY-MM-DD`（今天）
- [ ] 更新「狀態」：`穩定版本 (v{new_version})`
- [ ] 添加「v{new_version} 變更摘要」（一句話）

## 階段 4: README.md 同步更新 (README Synchronization)

### 4.1 更新目錄結構

- [ ] 在目錄結構中新增新版本文件
- [ ] 標記新版本為「最新版」⭐
- [ ] 移除或標記舊版本為「舊版保留」
- [ ] 更新目錄結構的註解

### 4.2 更新版本索引

- [ ] 在「版本索引」章節頂部添加新版本條目
- [ ] 填寫：版本號、發布日期、變更類型
- [ ] 列出重大變更（與主文檔一致）
- [ ] 添加變更背景和硬體/軟體環境說明
- [ ] 將前一個版本標題改為歷史版本（如：`### 📦 v2.0`）

### 4.3 更新全文版本引用

搜索並更新所有舊版本號引用：
- [ ] 更新「欄位分類總覽 (vX.Y)」標題
- [ ] 更新「關鍵欄位說明 (vX.Y 更新)」標題
- [ ] 更新「資料庫 Schema (vX.Y 更新)」標題
- [ ] 更新「資料驗證規則 (vX.Y)」標題
- [ ] 更新「重要提醒 (vX.Y 更新)」標題

### 4.4 更新快速開始指令

- [ ] 更新「閱讀完整規格」路徑：`{spec-name}-v{new_version}.md`
- [ ] 更新遷移腳本路徑：`migration_v{new_version}.sql`（如適用）
- [ ] 更新相關文件連結

### 4.5 更新資料庫 Schema（如有新增欄位）

- [ ] 在 Schema 章節添加新欄位定義
- [ ] 標記新欄位：`-- NEW in v{new_version}`
- [ ] 添加欄位說明註解

### 4.6 更新資料來源區分（如適用）

- [ ] 在「資料來源區分」章節標記新增欄位
- [ ] 使用 🆕 標記：`🆕 v{new_version}`

### 4.7 更新版本遷移章節

- [ ] 更新「從 vX.Y 遷移到 v{new_version}」標題
- [ ] 更新遷移步驟說明
- [ ] 更新遷移腳本路徑引用
- [ ] 更新詳細遷移指南連結

### 4.8 更新文檔元資訊

- [ ] 更新底部「文件版本」：`{new_version}`
- [ ] 更新「更新日期」：`YYYY-MM-DD`（今天）
- [ ] 更新「狀態」：`穩定版本 (v{new_version})`
- [ ] 添加「v{new_version} 變更摘要」

## 階段 5: 文件重命名 (File Renaming)

### 5.1 重命名主規格文檔

- [ ] 確認新文件名：`{spec-name}-v{new_version}.md`
- [ ] 執行重命名：`mv {old_name} {new_name}`
- [ ] 驗證文件重命名成功：`ls -la`

### 5.2 確認舊版本處理

- [ ] 決定是否保留上一版本文件
- [ ] 如果不保留，刪除舊版本文件
- [ ] 如果保留，確認 README.md 中標記為「舊版保留」

## 階段 6: 驗證與檢查 (Validation & Quality Check)

### 6.1 版本號一致性檢查

- [ ] 主規格文檔標題版本號
- [ ] 主規格文檔文件說明版本號
- [ ] 主規格文檔底部元資訊版本號
- [ ] README.md 目錄結構版本號
- [ ] README.md 版本索引版本號
- [ ] README.md 底部元資訊版本號
- [ ] 所有章節標題中的版本號引用

### 6.2 日期一致性檢查

- [ ] 版本歷史表格發布日期
- [ ] 主規格文檔底部更新日期
- [ ] README.md 版本索引發布日期
- [ ] README.md 底部更新日期
- [ ] 所有日期使用 ISO 8601 格式 (YYYY-MM-DD)

### 6.3 文件連結有效性檢查

- [ ] README.md 中的主規格文檔連結
- [ ] README.md 中的遷移指南連結
- [ ] README.md 中的相關文件連結
- [ ] 主規格文檔中的交叉引用連結

### 6.4 格式規範檢查

- [ ] 版本歷史表格格式正確（Markdown 表格）
- [ ] 變更詳情使用 `<br>` 換行
- [ ] 變更類型圖示正確顯示
- [ ] 版本號使用粗體 `**vX.Y**`
- [ ] 程式碼區塊使用正確的語言標記

### 6.5 內容完整性檢查

- [ ] 版本歷史記錄完整（所有歷史版本）
- [ ] 詳細變更說明包含所有必要章節
- [ ] 變更對照完整（修正前/後）
- [ ] README.md 包含新版本所有資訊
- [ ] 所有新增欄位都有文檔說明

### 6.6 生成更新摘要報告

生成包含以下內容的報告：

```markdown
# 規格文檔版本更新報告

## 更新摘要
- 舊版本: v{old_version}
- 新版本: v{new_version}
- 變更類型: {icon} {type}
- 發布日期: {date}

## 更新文件清單
- ✅ {spec-name}-v{new_version}.md (主規格文檔)
- ✅ README.md (版本索引)
- ❌ sql/migration_v{new_version}.sql (未創建，建議添加)

## 執行的操作
1. ✅ 添加版本歷史記錄
2. ✅ 更新版本號 ({count} 處)
3. ✅ 更新 README.md ({count} 處)
4. ✅ 重命名文件
5. ✅ 驗證所有連結

## 驗證結果
- ✅ 版本號一致性檢查通過 ({count} 處確認)
- ✅ 日期一致性檢查通過 ({count} 處確認)
- ✅ 文件連結有效性檢查通過 ({count} 個連結)
- ✅ 格式規範檢查通過
- ✅ 內容完整性檢查通過

## 建議
- [ ] 建議添加遷移腳本: sql/migration_v{new_version}.sql
- [ ] 建議更新相關系統文檔引用新版本
- [ ] 建議通知團隊成員規格更新
```

## 常見問題檢查清單

### 版本號相關

- [ ] 是否正確區分 Major/Minor/Patch 版本變更？
- [ ] 版本號是否按順序遞增？
- [ ] 是否所有地方的版本號都一致？

### 格式相關

- [ ] Markdown 表格是否對齊？
- [ ] 程式碼區塊是否使用正確的語言標記？
- [ ] 連結是否使用相對路徑？
- [ ] 圖示是否正確顯示？

### 內容相關

- [ ] 變更摘要是否清晰具體？
- [ ] 變更對照是否包含修正前/後？
- [ ] 是否說明變更背景和原因？
- [ ] 新增欄位是否都有完整說明？

### 文件管理相關

- [ ] 是否保留了必要的舊版本文件？
- [ ] 文件命名是否符合規範？
- [ ] 目錄結構是否清晰？
- [ ] 是否需要創建遷移腳本？
