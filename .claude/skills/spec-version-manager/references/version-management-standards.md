# 規格文檔版本管理標準

## 版本編號規則

### 語義化版本控制 (Semantic Versioning)

使用 `vX.Y.Z` 格式：

- **主版本號 (Major, X)**: 不向下相容的重大變更
  - 例如：架構重構、資料庫遷移、API 破壞性變更
  - 範例：v1.0 → v2.0（完全重構欄位結構）

- **次版本號 (Minor, Y)**: 向下相容的功能新增或修正
  - 例如：新增欄位、調整計算邏輯、新增功能模組
  - 範例：v2.0 → v2.1（新增氣壓感測器欄位）

- **修訂號 (Patch, Z)**: 向下相容的錯誤修正
  - 例如：文檔修正、範例更新、小錯誤修正
  - 範例：v2.1.0 → v2.1.1（修正文檔錯字）
  - 注意：目前專案中未使用 Patch 版本號

## 變更類型分類

每個版本更新必須標記變更類型，使用標準圖示：

| 圖示 | 變更類型 | 說明 | 適用版本號變更 |
|-----|---------|------|--------------|
| 🎉 | 初始版本 | 建立基礎規格 | v1.0 |
| 🏗️ | 架構重構 | 重新組織結構、資料模型變更 | Major (X) |
| 🔧 | 硬體環境調整 | 根據實際硬體規格修正 | Minor (Y) |
| 📦 | 欄位擴充 | 新增資料欄位、功能模組 | Minor (Y) |
| ✨ | 功能新增 | 新增功能特性 | Minor (Y) |
| 🐛 | 錯誤修正 | Bug fixes | Patch (Z) |
| 📝 | 文檔更新 | 文檔修正、範例更新 | Patch (Z) |
| ⚡ | 性能優化 | 性能改進 | Minor (Y) 或 Patch (Z) |
| 🔒 | 安全修正 | 安全性修補 | Patch (Z) |

## 版本歷史表格格式

### 標準表格結構

```markdown
| 版本 | 發布日期 | 變更類型 | 變更摘要 | 變更詳情 |
|------|---------|---------|---------|---------|
| **vX.Y** | YYYY-MM-DD | 🔧 變更類型名稱 | 一句話摘要 | • 變更項目 1<br>• 變更項目 2<br>• 變更項目 3 |
```

### 填寫規範

1. **版本號**: 使用粗體 `**vX.Y**` 或 `**vX.Y.Z**`
2. **發布日期**: ISO 8601 格式 `YYYY-MM-DD`
3. **變更類型**: 圖示 + 中文名稱（例如：🔧 硬體環境調整）
4. **變更摘要**: 一句話（15-30 字）清楚描述核心變更
5. **變更詳情**: 使用 `•` 列表，每項簡潔明確，使用 `<br>` 換行

### 範例

```markdown
| **v2.1** | 2025-11-07 | 🔧 硬體環境調整 | 根據實際硬體規格修正感測器欄位 | • 修正 `ele` 欄位資料來源：僅來自 GPS 晶片（移除氣壓計）<br>• 氣壓計單位修正：hPa → **Pa** (101325 Pa)<br>• 重組感測器欄位：新增「1.2.3 氣壓與環境感測器」專區<br>• 新增計算欄位：**2.2.3 氣壓高度計算** (altitude_barometric)<br>• 氣壓高度依賴：air_pressure + temperature + humidity<br>• 提供 ISA 模型完整實作程式碼 |
```

## 詳細變更說明章節結構

每個新版本應該包含獨立的詳細變更說明章節：

```markdown
### vX.Y 版本變更詳細說明

**變更背景**：
[說明為什麼要進行這次變更，商業需求或技術需求]

**硬體/軟體環境**：
[如果涉及硬體或環境變更，明確說明]
- 硬體組件：[列出相關硬體]
- 軟體版本：[列出相關軟體]

**關鍵變更**：

1. **變更項目 1 標題** (檔案路徑:行號)
   ```markdown
   # 修正前
   [原始內容]

   # 修正後
   [新內容]
   ```

2. **變更項目 2 標題** (Section X.Y.Z)
   - 詳細說明變更內容
   - 列出新增/移除/修改的項目

**精度/性能比較**（如適用）：
- 修正前：[數據]
- 修正後：[數據]
- 改進幅度：[百分比或具體數值]
```

## 文檔元資訊格式

每個規格文檔底部應包含：

```markdown
---

**文件版本**: X.Y
**更新日期**: YYYY-MM-DD
**狀態**: 穩定版本 (vX.Y) / 舊版保留 (vA.B)
**相容性**: [相關標準，例如：GPX 1.1 標準]

**vX.Y 變更摘要**: [一句話摘要本版本核心變更]
```

## 文件命名規範

### 主規格文檔

- 格式：`{spec-name}-v{version}.md`
- 範例：`gpx-fields-specification-v2.1.md`

### 索引文檔

- 固定名稱：`README.md`
- 位置：規格文檔同級目錄

### 遷移腳本（可選）

- 格式：`migration_v{version}.sql`
- 範例：`migration_v2.1.sql`
- 位置：`sql/` 目錄

## 目錄結構範例

```
spec/{spec-category}/
├── README.md                           # 版本索引與快速參考
├── {spec-name}-v2.1.md                # 最新版規格 ⭐
├── {spec-name}-v2.0.md                # 舊版保留（如需要）
└── {spec-name}-v1.1.md                # 舊版保留
```

## 版本更新摘要格式

每個版本應該在文檔開頭提供快速索引：

```markdown
### 版本更新摘要（快速索引）

**vX.Y 主要變更**：
- 🔧 變更項目 1
- ✅ 變更項目 2
- ✅ 變更項目 3

**vX.Y-1 主要變更**：
- ✅ 變更項目 1
- ✅ 變更項目 2
```

## 日期格式標準

統一使用 ISO 8601 格式：

- 標準格式：`YYYY-MM-DD`
- 範例：`2025-11-07`
- 不使用：`2025/11/07`、`11-07-2025`、`07/11/2025`
