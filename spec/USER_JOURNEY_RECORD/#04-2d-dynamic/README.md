# 記錄點 #04: 2D 動態模式 + 風場

**優先級**: P1
**狀態**: 待開發
**對應測試**: `tests/e2e/user-journey/stage-4-2d-dynamic.spec.ts`

---

## 概述

2D 動態軌跡模式，提供軌跡播放動畫、風場顯示和測量工具功能。

---

## 進入方式

- 前置記錄點: #1 → #2 → #3
- 操作步驟:
  1. 在 2D 靜態模式
  2. 點擊 timeline 按鈕切換到動態模式

---

## DOM 結構與選擇器

| 區域 | 元素 | 選擇器 | 功能 |
|------|------|--------|------|
| 控制 | 播放 | `button` (play_arrow) | 播放動畫 |
| 控制 | 暫停 | `button` (pause) | 暫停動畫 |
| 控制 | 快進 | `button` (fast_forward) | 加速播放 |
| 控制 | 快退 | `button` (fast_rewind) | 減速播放 |
| 工具 | 風場 | `button description="查看风场"` | 風場覆蓋層 |
| 工具 | 測量 | `button description="测量距离工具"` | 測量工具 |

---

## 模式差異

| 項目 | 靜態模式 | 動態模式 |
|------|----------|----------|
| 軌跡標記 | 15-20 個 | 1-3 個 |
| 播放控制 | 無 | 有 (減速/播放/加速) |
| 鴿子圖標 | 靜態 | 沿軌跡移動 |

---

## 測試檢查點

| # | 檢查項目 | 優先級 | 驗證方式 | 狀態 |
|---|---------|--------|---------|------|
| 4.1 | 動態切換 | P0 | 標記數量變為 < 5 | ⬜ |
| 4.2 | 播放按鈕 | P0 | play_arrow 按鈕存在 | ⬜ |
| 4.3 | 暫停按鈕 | P0 | 播放後 pause 按鈕出現 | ⬜ |
| 4.4 | 快進功能 | P1 | fast_forward 按鈕可用 | ⬜ |
| 4.5 | 快退功能 | P1 | fast_rewind 按鈕可用 | ⬜ |
| 4.6 | 風場開啟 | P1 | 風向箭頭覆蓋層顯示 | ⬜ |
| 4.7 | 靜態切回 | P0 | 切回後標記 ≥ 15 | ⬜ |

---

## 已知問題

| 問題 | 狀態 | 解決方案 |
|------|------|---------|
| 風場顯示不完整 | 待確認 | - |

---

## 相關參考

- USER_JOURNEY_RECORD_V2: [記錄點 #4](../USER_JOURNEY_RECORD_V2.md#記錄點-4-2d-動態模式--風場)
- 現有測試: `tests/e2e/user-journey/stage-4-2d-dynamic.spec.ts`
- Helper: `tests/helpers/mode-switching.ts` - `switchSubMode2D()`

---

## 開發日誌

| 日期 | 內容 |
|------|------|
| 2025-12-10 | 建立 spec 模板 |
