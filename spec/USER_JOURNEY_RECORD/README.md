# User Journey 測試規格

**建立日期**: 2025-12-10
**版本**: 2.1
**用途**: User Journey 自動化測試的規格主目錄

---

## 目錄結構

```
spec/
├── README.md                    ← 本文件 (索引導航)
├── USER_JOURNEY_RECORD_V2.md    ← 主要測試流程規格
│
│ 主流程
├── #01-homepage/                ← 首頁 - 賽事列表
├── #02-race-entry/              ← 賽事詳情 - 鴿子列表
├── #03-2d-static/               ← 2D 靜態軌跡
├── #04-2d-dynamic/              ← 2D 動態模式
├── #05-3d-mode/                 ← 3D 模式
├── #06-trajectory-detail/       ← 軌跡詳情 - 航點列表
│
│ 輔助功能
├── #07-multi-select/            ← 多選鴿子顯示
├── #08-loft-list/               ← 鴿舍列表 Tab
├── #09-check-list/              ← 勾選清單面板
├── #10-radar-mode/              ← 雷達模式
│
│ 品質監控
└── #11-error-monitor/           ← 錯誤監控
```

---

## 記錄點索引

| 記錄點 | 名稱 | 類型 | 優先級 | 測試項目 | 狀態 |
|--------|------|------|--------|---------|------|
| **主流程** ||||||
| [#01](#01-homepage) | 首頁 - 賽事列表 | 入口 | P0 | 4 | 待開發 |
| [#02](#02-race-entry) | 賽事詳情 - 鴿子列表 | 核心 | P0 | 5 | 待開發 |
| [#03](#03-2d-static) | 2D 靜態軌跡 | 核心 | P0 | 6 | 待開發 |
| [#04](#04-2d-dynamic) | 2D 動態模式 | 進階 | P1 | 7 | 待開發 |
| [#05](#05-3d-mode) | 3D 模式 | 核心 | P0 | 8 | 待開發 |
| [#06](#06-trajectory-detail) | 軌跡詳情 - 航點列表 | 核心 | P0 | 15 | 待開發 |
| **輔助功能** ||||||
| [#07](#07-multi-select) | 多選鴿子顯示 | 進階 | P1 | 4 | 待開發 |
| [#08](#08-loft-list) | 鴿舍列表 Tab | 進階 | P1 | 5 | 待開發 |
| [#09](#09-check-list) | 勾選清單面板 | 輔助 | P2 | 5 | 待開發 |
| [#10](#10-radar-mode) | 雷達模式 | 特殊 | P2 | 8 | 待開發 |
| **品質監控** ||||||
| [#11](#11-error-monitor) | 錯誤監控 | 監控 | P0 | 3 | 待開發 |

**總計**: 70 個測試項目 (P0: 28, P1: 29, P2: 13)

---

## 使用者歷程流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 主流程                                                                       │
│ 首頁 → 賽事詳情 → 2D靜態 → 2D動態 → 3D模式 → 軌跡詳情                        │
│  #01      #02       #03       #04       #05       #06                        │
├─────────────────────────────────────────────────────────────────────────────┤
│ 輔助功能                                                                     │
│ 多選鴿子 → 鴿舍列表 → 勾選清單 → 雷達模式                                    │
│    #07        #08        #09        #10                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│ 品質監控                                                                     │
│ 錯誤監控 #11 (貫穿所有階段)                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 架構設計

### 測試執行策略
- **獨立執行**: 每支測試可單獨運行
- **共用 Setup**: 前置流程由 `tests/helpers/` 處理
- **無狀態依賴**: 測試間不共享狀態

### 代碼共用策略
- 共用函數抽取到 `tests/helpers/`
- 測試檔案 import helpers，專注測試邏輯

---

## 相關文件

### 主要規格
- [USER_JOURNEY_RECORD_V2.md](./USER_JOURNEY_RECORD_V2.md) - 完整測試流程規格

### 測試實作
- `tests/e2e/user-journey/` - Playwright 測試檔案
- `tests/helpers/` - 共用 helper 函數

### 舊版參考 (不修改)
- `dev/active/test-flow-refactor/specs/` - 原有 spec 文件
- `dev/active/test-flow-refactor/USER_JOURNEY_RECORD.md` - V1 版本

---

## 開發指南

### 新增記錄點 Spec

1. 複製模板到對應目錄
2. 填入 USER_JOURNEY_RECORD_V2 的內容
3. 補充選擇器和已知問題
4. 更新本索引的狀態

### Spec 與測試對應

```
spec/#03-2d-static/README.md
    ↓ 規格來源
tests/e2e/user-journey/03-2d-static.spec.ts
    ↓ 共用函數
tests/helpers/trajectory-utils.ts
```

---

**最後更新**: 2025-12-10
