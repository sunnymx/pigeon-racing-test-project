# 記錄點 #10: 雷達模式

**優先級**: P2
**狀態**: 待開發
**對應測試**: `tests/e2e/user-journey/10-radar-mode.spec.ts` (待建立)

---

## 概述

雷達模式提供整場賽事的追蹤功能，顯示所有參賽鴿子的即時位置和里程碑統計。

> **注意**: 啟用雷達模式需下載大量資料 (100-300MB)，預計需時 1-5 分鐘。

---

## 進入方式

- 前置記錄點: #1 → #2
- 操作步驟:
  1. 在賽事詳情頁面
  2. 點擊「雷達模式」按鈕
  3. 在確認對話框點擊「確定」
  4. 等待資料下載完成

---

## DOM 結構與選擇器

### 確認對話框

| 區域 | 元素 | 選擇器 | 功能 |
|------|------|--------|------|
| 對話框 | 取消 | `button "取消"` | 取消操作 |
| 對話框 | 確定 | `button "確定"` | 開始下載 |

### 雷達模式介面

| 區域 | 元素 | 選擇器 | 功能 |
|------|------|--------|------|
| 時間軸 | 36+ 小時範圍 | - | 整場賽事時間 |
| 搜尋 | 搜尋框 | `textbox` + search icon | 搜尋鴿子 |
| 列表 | 鴿子卡片 | 卡片式列表 | 所有參賽鴿子 |
| 里程碑 | 50KM~300KM | - | 完成率和數量 |
| 控制 | 視角/播放/圖資 | - | 播放控制 |

---

## 確認對話框

```
┌─────────────────────────────────┐
│ 是否接換至雷達模式？            │
├─────────────────────────────────┤
│ 启用后将下载整场赛事的飞行轨迹，│
│ 预计需时约1-5分钟，平均消耗流量 │
│ 为100-300MB，请确认是否进行切换？│
├─────────────────────────────────┤
│     [取消]        [確定]        │
└─────────────────────────────────┘
```

---

## 距離里程碑

| 里程 | 顯示內容 |
|------|----------|
| 50KM | 完成率 % + 數量 |
| 100KM | 完成率 % + 數量 |
| 150KM | 完成率 % + 數量 |
| 200KM | 完成率 % + 數量 |
| 250KM | 完成率 % + 數量 |
| 300KM | 完成率 % + 數量 |

---

## 測試檢查點

| # | 檢查項目 | 優先級 | 驗證方式 | 狀態 |
|---|---------|--------|---------|------|
| 10.1 | 確認對話框 | P2 | 對話框顯示 | ⬜ |
| 10.2 | 取消功能 | P2 | 取消 → 返回列表 | ⬜ |
| 10.3 | 下載進度 | P2 | 進度顯示 | ⬜ |
| 10.4 | 介面載入 | P2 | 雷達模式顯示 | ⬜ |
| 10.5 | 鴿子列表 | P2 | 卡片列表存在 | ⬜ |
| 10.6 | 里程碑統計 | P2 | 50KM~300KM 顯示 | ⬜ |
| 10.7 | 搜尋功能 | P2 | 輸入 → 結果過濾 | ⬜ |
| 10.8 | 播放控制 | P2 | 播放/暫停正常 | ⬜ |

---

## 已知問題

| 問題 | 狀態 | 解決方案 |
|------|------|---------|
| 下載時間長 | 已知 | 測試需設定較長 timeout |
| 資料量大 | 已知 | CI 環境可能需跳過此測試 |

---

## 相關參考

- USER_JOURNEY_RECORD_V2: [記錄點 #10](../USER_JOURNEY_RECORD_V2.md#記錄點-10-雷達模式)

---

## 開發日誌

| 日期 | 內容 |
|------|------|
| 2025-12-10 | 建立 spec 模板 |
