# 記錄點 #02: 賽事詳情 - 鴿子列表

**優先級**: P0
**狀態**: 待開發
**對應測試**: `tests/e2e/user-journey/stage-2-race-entry.spec.ts`

---

## 概述

賽事詳情頁面，顯示參賽鴿子列表，提供鴿子選擇、環號搜尋、名次查詢等功能。

---

## 進入方式

- 前置記錄點: #1
- 操作步驟:
  1. 在首頁點擊賽事卡片的「進入」按鈕

---

## DOM 結構與選擇器

| 區域 | 元素 | 選擇器 | 功能 |
|------|------|--------|------|
| 頂部 | 賽事標題 | `heading` level 2 | 顯示賽事名稱 |
| 頂部 | 退出賽事 | `button "退出赛事"` | 返回首頁 |
| 頂部 | 查看軌跡 | `button "查看轨迹"` | 進入軌跡頁面 |
| 頂部 | 2D/3D 偏好 | `button "2D"` / `button "3D"` | 設定模式偏好 |
| 頂部 | 雷達模式 | `button "雷达模式"` | 進入雷達模式 |
| 頂部 | 勾選清單 | `button "勾选清单 N"` | 展開已選清單 |
| 標籤 | 名次搜尋 | `tab "名次&环号搜寻"` | 預設標籤 |
| 標籤 | 鴿舍列表 | `tab "鸽舍列表"` | 切換鴿舍視圖 |
| 列表 | 環號搜尋 | `textbox "請輸入環號"` | 環號搜尋 |
| 列表 | 查詢按鈕 | `button "查询环号"` / `button "查询名次"` | 執行查詢 |
| 列表 | 鴿子行 | `checkbox` | 選擇鴿子 |
| 列表 | 分頁 | `combobox "page select"` | 分頁導航 |

---

## 測試檢查點

| # | 檢查項目 | 優先級 | 驗證方式 | 狀態 |
|---|---------|--------|---------|------|
| 2.1 | 鴿子列表載入 | P0 | 檢查 checkbox 數量 > 0 | ⬜ |
| 2.2 | 鴿子選擇 | P0 | 點擊 checkbox → 狀態變更 | ⬜ |
| 2.3 | 環號搜尋 | P1 | 輸入環號 → 查詢 → 結果顯示 | ⬜ |
| 2.4 | 名次查詢 | P1 | 輸入名次 → 查詢 → 結果顯示 | ⬜ |
| 2.5 | 查看軌跡啟用 | P0 | 選擇鴿子 → 按鈕啟用 | ⬜ |

---

## 已知問題

| 問題 | 狀態 | 解決方案 |
|------|------|---------|
| 2D 偏好設定 | 已知 | 點擊「查看軌跡」前需確認 2D 偏好已選中 |

---

## 相關參考

- USER_JOURNEY_RECORD_V2: [記錄點 #2](../USER_JOURNEY_RECORD_V2.md#記錄點-2-賽事詳情---鴿子列表)
- 現有測試: `tests/e2e/user-journey/stage-2-race-entry.spec.ts`
- Helper: `tests/helpers/navigation.ts` - `enterRace()`, `selectPigeon()`

---

## 開發日誌

| 日期 | 內容 |
|------|------|
| 2025-12-10 | 建立 spec 模板 |
