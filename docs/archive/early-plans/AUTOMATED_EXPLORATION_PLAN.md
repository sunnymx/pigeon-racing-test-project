# Skyracing.com.cn 自动化探索执行计划

## 文档信息
- **创建日期**: 2025-11-17
- **文档版本**: v1.0.0
- **计划类型**: Playwright MCP 自动化探索任务
- **预计执行时间**: 30-45 分钟

---

## 📋 核心目标

1. **验证现有文档的准确性**（TEST_REPORT.md, TEST_CASES.md）
2. **发现文档遗漏的功能和测试点**
3. **深入测试每个功能的细节**
4. **生成完整的对比分析报告**

---

## 📚 参考文档（必读）

执行前请先阅读以下文档，理解现有的测试覆盖范围和已知问题：

1. **[TEST_REPORT.md](../TEST_REPORT.md)** - 互动测试报告 v0.1.0
   - 已验证的 5 个基础步骤
   - 4 个已知问题和解决方案（问题#1-#4）
   - 成功流程记录

2. **[TEST_CASES.md](TEST_CASES.md)** - 详细测试用例
   - 35+ 测试用例，分为 7 个测试文件
   - TC-01 到 TC-07 的详细步骤和验证方法

3. **[KNOWN_ISSUES_SOLUTIONS.md](KNOWN_ISSUES_SOLUTIONS.md)** - 已知问题解决方案
   - 问题#1: 2D 轨迹初次载入失败 → 3D→2D 切换序列
   - 问题#2: 动态/静态模式混淆 → 检查标记数量
   - 问题#3: 轨迹点点击无响应 → 使用正确选择器
   - 问题#4: 数据载入时序问题 → 增加等待和重试

4. **[../api-reference/API_ENDPOINTS.md](../api-reference/API_ENDPOINTS.md)** - API 端点文档
   - 6 个核心 API 端点

5. **[HELPER_FUNCTIONS_DESIGN.md](HELPER_FUNCTIONS_DESIGN.md)** - 辅助函数设计
   - 25+ 辅助函数的实现建议

---

## 🎯 执行计划（三阶段）

### Phase 1: 验证已测试流程（优先级 P0）

重新执行 TEST_REPORT.md 中已验证的完整流程：

#### 步骤 1: 开启网站并进入赛事
```
1. 导航到 https://skyracing.com.cn/
2. 等待页面加载（networkidle）
3. 验证页面标题和赛事卡片
4. 点击第一个赛事的"进入"按钮
```

**验证点**：
- ✅ 页面标题为 "Skyracing GPS pigeon tracker"
- ✅ 至少显示 10 个赛事卡片
- ✅ 进入按钮可点击

#### 步骤 2: 选择鸽子并查看轨迹
```
1. 勾选排名第一的鸽子（2025-26-XXXXXXX）
2. 验证"勾选清单 1"显示
3. 点击"查看轨迹"按钮
4. 等待轨迹视图加载
```

**验证点**：
- ✅ 勾选清单显示 "1"
- ✅ 查看轨迹按钮从禁用变为启用
- ✅ 轨迹视图加载成功

#### 步骤 3: 切换到 2D 模式（关键！使用问题#1 的解决方案）
```
1. 使用 3D→2D 切换序列
2. 等待地图瓦片加载（>50 个 img 元素）
3. 验证红色轨迹线可见
```

**重要**：重新在名次清單選取軌跡後，查看軌跡，反覆幾次，確認軌跡是否生成。2D 模式有分成 2D 靜態跟 2D 動態模式，需要進行區分。（，参考 KNOWN_ISSUES_SOLUTIONS.md 问题#1

**验证点**：
- ✅ 按钮文字变为 "3D模式"（表示当前在2D），2D 模式區分靜態跟動態模式，確保在靜態模式下顯示正常軌跡資訊。
- ✅ 地图瓦片载入（>50 个 img 元素）
- ✅ 无 gpx2d undefined 错误

#### 步骤 4: 确保静态模式（问题#2 的解决方案）
```
1. 检查轨迹标记数量 [title*="2025-26-"]
2. 如果 < 3，点击 timeline 按钮切换
3. 验证多个标记可见
```

**验证点**：
- ✅ 可见多个轨迹标记点（≥3 个）
- ✅ 完整红色轨迹线显示
- ✅ 时间不自动推进

#### 步骤 5: 点击轨迹点查看资讯（问题#3 的解决方案）
```
1. 使用正确的选择器定位标记 [title*="2025-26-"]
2. 点击中间位置的标记
3. 验证信息窗格显示完整数据
```

**验证点**：
- ✅ 白色信息窗格出现
- ✅ 显示公环号、时间、速度、方向、海拔、名次

#### Phase 1 总结要求
- 记录与 TEST_REPORT.md 的差异
- 验证 4 个已知问题的解决方案是否仍然有效
- 发现是否有新的问题

---

### Phase 2: 执行计划测试用例（优先级 P0/P1）

按照 TEST_CASES.md 执行以下测试用例：

#### TC-01: 赛事列表测试（5 个用例，优先级 P1）

**TC-01-001: 首页加载验证**
- 验证页面标题
- 验证赛事卡片数量 ≥ 10
- 检查控制台错误

**TC-01-002: 赛事搜寻功能**
- 定位搜寻文本框
- 输入关键词（例如: "2024"）
- 验证结果过滤

**TC-01-003: 年份筛选功能**
- 点击年份选择器
- 选择特定年份
- 验证赛事列表更新

**TC-01-004: 进入赛事详情**
- 点击"进入"按钮
- 验证页面跳转
- 验证排名列表显示

**TC-01-005: 赛事卡片信息完整性**
- 验证赛事名称显示
- 验证赛事日期显示
- 验证"进入"按钮显示

---

#### TC-02: 2D 静态轨迹测试（6 个用例，优先级 P0）

**注意**：TC-02-001 到 TC-02-004 在 Phase 1 已完成，此处补充剩余用例。

**TC-02-005: 轨迹线渲染验证**
- 截取地图区域截图
- 验证红色轨迹线可见
- 验证轨迹连续完整

**TC-02-006: 网络请求验证**
- 设置网络请求监听
- 点击"查看轨迹"
- 验证 `ugetPigeonAllJsonInfo` API 被调用
- 验证响应状态码 200

---

#### TC-03: 2D 动画播放测试（7 个用例，优先级 P0）⭐️ 重点

**TC-03-001: 切换到动态播放模式**
- 检查当前标记点数量
- 如果 ≥3 个（静态模式），点击 timeline 切换
- 验证进入动态模式（标记点 < 3）
- 验证播放控制按钮显示

**TC-03-002: 播放功能测试**
- 记录初始时间
- 点击播放按钮
- 等待 2 秒
- 验证时间戳更新
- 验证播放按钮变为暂停图标

**TC-03-003: 暂停功能测试**
- 点击暂停按钮
- 记录当前时间
- 等待 2 秒
- 验证时间未变化
- 验证暂停图标变为播放图标

**TC-03-004: 快进功能测试**
- 记录当前时间
- 点击快进按钮
- 等待 1 秒
- 验证时间大幅跳跃

**TC-03-005: 快退功能测试**
- 确保时间已前进
- 记录当前时间
- 点击快退按钮
- 验证时间回退

**TC-03-006: 速度调整功能**
- 定位速度滑块
- 调整到 1x 速度
- 验证速度显示更新
- 调整到 180x 速度
- 验证播放速度变化

**TC-03-007: Canvas 更新验证**
- 截取 Canvas 初始截图
- 等待 1 秒
- 截取 Canvas 当前截图
- 对比两张截图（应不同）

---

#### TC-04: 3D 轨迹播放测试（6 个用例，优先级 P0）⭐️ 重点

**TC-04-001: 切换到 3D 模式**
- 点击 "3D模式" 按钮
- 等待 Cesium 加载
- 验证按钮文字变为 "2D模式"
- 验证 3D 视图渲染

**TC-04-002: Cesium 引擎加载验证**
- 检查 `window.Cesium` 对象
- 检查 `window.viewer` 对象
- 等待地球瓦片加载完成

**TC-04-003: 3D 播放控制测试**
- 点击播放按钮
- 验证播放状态
- 点击暂停按钮
- 验证暂停状态

**TC-04-004: 视角切换功能**
- 点击 "视角1" 按钮
- 截图记录视角1
- 点击 "视角2" 按钮
- 截图记录视角2
- 对比两个视角（应不同）

**TC-04-005: 显示轨迹点开关**
- 点击 "显示轨迹点" 按钮
- 验证按钮文字切换
- 验证轨迹点可见性改变

**TC-04-006: 3D 视觉截图验证**
- 等待 3D 渲染完成
- 截取全屏截图
- 验证 3D 地球可见
- 验证轨迹线可见

---

#### TC-05: 鸽舍列表测试（4 个用例，优先级 P1）⭐️ 重点

**TC-05-001: 切换到鸽舍列表 Tab**
- 定位 "鸽舍列表" Tab
- 点击切换
- 验证鸽舍列表显示

**TC-05-002: 选择鸽舍**
- 定位第一个鸽舍
- 点击选择
- 验证鸽舍展开显示鸽子列表

**TC-05-003: 勾选鸽舍鸽子并查看轨迹**
- 勾选第一只鸽子
- 勾选第二只鸽子
- 验证勾选计数为 2
- 点击 "查看轨迹"
- 验证多轨迹显示

**TC-05-004: 多轨迹网络请求验证**
- 设置网络监听
- 点击 "查看轨迹"
- 验证多个 API 请求（每只鸽子一个）

---

#### TC-06: 轨迹详情测试（4 个用例，优先级 P1）

**TC-06-001: 侧边栏数据完整性验证**
- 提取所有栏位数据
- 验证公环号格式: `\d{4}-\d{2}-\d{7}`
- 验证时间格式: `YYYY-MM-DD HH:MM:SS`
- 验证分速 > 0
- 验证距离 > 0

**TC-06-002: 轨迹统计数据验证**
- 验证最高分速 ≥ 平均分速
- 验证最大高度 ≥ 平均高度
- 验证实际距离 ≥ 直线距离

**TC-06-003: 轨迹点窗格信息验证**
- 点击轨迹点
- 验证弹窗显示
- 验证公环号、时间、速度、方向、海拔、名次都显示
- 验证数据格式正确

**TC-06-004: 实时数据更新验证**
- 开始播放
- 记录侧边栏当前数据
- 等待播放
- 验证当前速度、海拔、已飞行时间更新

---

#### TC-07: UI 元素综合测试（6 个用例，优先级 P2）

**TC-07-001: 按钮状态测试**
- 验证 "查看轨迹" 按钮初始为禁用
- 勾选鸽子后验证按钮启用
- 取消勾选后验证按钮禁用

**TC-07-002: 勾选清单计数测试**
- 勾选 1 只鸽子，验证显示 "1"
- 再勾选 1 只，验证显示 "2"
- 取消 1 只，验证显示 "1"

**TC-07-003: 播放图标切换测试**
- 验证初始显示播放图标
- 点击播放，验证变为暂停图标
- 点击暂停，验证变为播放图标

**TC-07-004: 加载对话框行为测试**
- 点击 "查看轨迹"
- 验证加载对话框出现
- 等待加载完成
- 验证对话框消失

**TC-07-005: 表格行数验证**
- 获取排名表格行数
- 验证行数 ≥ 10

**TC-07-006: 控制台错误监控**
- 设置控制台监听
- 执行各种操作
- 收集错误日志
- 验证无严重错误（或仅已知错误）

---

### Phase 3: 探索未记录功能（优先级 P2）

探索文档中未明确测试的功能：

#### 3.1 尝试所有可见的按钮和控件

**导航栏探索**：
- 点击所有菜单项
- 测试下拉菜单（如果有）
- 测试语言切换（如果有）

**工具栏探索**：
- 测试所有工具栏按钮
- 测试设置面板（如果有）
- 测试帮助/关于（如果有）

**轨迹视图控件**：
- 测试所有未记录的按钮
- 测试雷达模式（如果可访问）
- 测试时速表显示（如果可访问）

#### 3.2 测试边界情况

**无效操作**：
- 不选择鸽子直接点击"查看轨迹"
- 选择大量鸽子（10 只、20 只）
- 输入无效的搜寻关键词
- 输入特殊字符

**极端条件**：
- 测试地图极端缩放级别
- 测试极端播放速度（1x、180x）
- 快速重复点击按钮

#### 3.3 发现隐藏功能

**交互探索**：
- 右键菜单测试
- 键盘快捷键测试
- 拖拽交互测试
- 长按操作测试

**数据探索**：
- 测试不同赛事
- 测试不同年份
- 测试不同鸽舍
- 测试不同名次的鸽子

#### 3.4 API 端点发现

**网络监控**：
- 记录所有网络请求
- 分析请求参数
- 分析响应结构
- 发现未记录的 API 端点

**验证现有 API 文档**：
- 对比 API_ENDPOINTS.md
- 验证端点 URL 准确性
- 验证参数说明准确性
- 验证响应格式准确性

---

## 📝 详细记录要求

对于**每个测试步骤**，记录以下信息：

### 操作记录模板
```markdown
#### [测试用例 ID]: [测试名称]

**执行时间**: HH:MM:SS - HH:MM:SS (耗时 XX 秒)
**状态**: ✅ 通过 / ❌ 失败 / ⏭️ 跳过

**操作步骤**:
1. 人类可读描述
   ```typescript
   // Playwright 代码
   await page.locator('selector').click();
   ```
2. ...

**验证结果**:
- ✅ 预期结果 1: 实际观察到 XXX
- ❌ 预期结果 2: 未观察到 XXX，实际为 YYY

**截图**:
- 初始状态: `screenshots/tc-xx-xx-before.png`
- 执行后: `screenshots/tc-xx-xx-after.png`

**网络请求**:
- `POST /api/ugetPigeonAllJsonInfo` - 200 OK (245ms)
  - Request: `{pigeonId: "xxx"}`
  - Response: `{code: 0, data: {...}}`

**控制台**:
- INFO: 地图瓦片加载完成
- ERROR: pigeon.gpx2d undefined (已知问题#1)

**问题记录** (如果有):
- 严重程度: 🔴 高 / 🟡 中 / 🟢 低
- 描述: ...
- 是否已知: ✅ 问题#X / ❌ 新问题
- 尝试的解决方案: ...
```

### 截图命名规范
```
screenshots/
├── phase1/
│   ├── step1-homepage.png
│   ├── step2-select-pigeon.png
│   └── ...
├── phase2/
│   ├── tc-01-001-page-load.png
│   ├── tc-03-002-playback-playing.png
│   └── ...
└── phase3/
    ├── new-feature-radar-mode.png
    └── ...
```

---

## ⚠️ 错误处理策略

遇到错误时，按以下顺序处理：

### 1. 检查已知问题文档
```
查找 KNOWN_ISSUES_SOLUTIONS.md:
- 问题#1: 2D 轨迹初次载入失败
  → 解决方案: 3D→2D 切换序列
- 问题#2: 动态/静态模式混淆
  → 解决方案: 检查标记数量
- 问题#3: 轨迹点点击无响应
  → 解决方案: 使用正确选择器
- 问题#4: 数据载入时序问题
  → 解决方案: 增加等待和重试
```

### 2. 通用恢复策略
```typescript
// 策略 1: 增加等待时间
await page.waitForTimeout(5000); // 5 秒

// 策略 2: 等待特定元素
await page.waitForSelector('selector', { timeout: 10000 });

// 策略 3: 重试操作（最多 2 次）
for (let i = 0; i < 3; i++) {
  try {
    await page.click('button');
    break;
  } catch (error) {
    if (i === 2) throw error;
    await page.waitForTimeout(2000);
  }
}

// 策略 4: 刷新页面重新开始
await page.reload();
await page.waitForLoadState('networkidle');
```

### 3. 记录并继续
如果无法解决：
```markdown
## 未解决问题记录

### 问题 #X: [问题标题]
**严重程度**: 🔴 高 / 🟡 中 / 🟢 低
**发现于**: TC-XX-XXX
**现象**: 详细描述...
**复现步骤**:
1. ...
2. ...

**尝试的解决方案**:
- ❌ 方案 1: 描述（失败原因）
- ❌ 方案 2: 描述（失败原因）

**是否阻塞**: ✅ 阻塞后续测试 / ❌ 不阻塞

**处理决定**: ⏭️ 跳过此测试用例，继续执行
```

### 4. 关键错误处理

| 错误类型 | 处理方式 |
|---------|---------|
| 无法加载网站 | 🛑 报告并停止，等待网站恢复 |
| 无法进入赛事 | 🔄 尝试其他赛事（第2、3个） |
| 数据异常 | 📝 记录但继续测试 |
| 元素找不到 | 🔍 检查选择器，尝试替代方案 |
| 操作超时 | ⏱️ 增加等待时间，重试 |
| JavaScript 错误 | 📋 记录到控制台日志，继续执行 |

---

## 📊 对比分析任务

完成测试后，生成以下对比表：

### 对比表 1: vs TEST_REPORT.md

```markdown
## 对比 TEST_REPORT.md v0.1.0

| 功能点 | TEST_REPORT 状态 | 本次验证结果 | 差异说明 | 建议更新 |
|--------|-----------------|-------------|----------|---------|
| 网站首页载入 | ✅ 已验证 | ✅ 通过 | 无差异 | - |
| 赛事列表显示 | ✅ 已验证 | ✅ 通过 | 无差异 | - |
| 赛事详情进入 | ✅ 已验证 | ✅ 通过 | 无差异 | - |
| 鸽子选择 | ✅ 已验证 | ✅ 通过 | 无差异 | - |
| 轨迹视图载入 | ✅ 已验证 | ✅ 通过 | 无差异 | - |
| 2D/3D模式切换 | ✅ 已验证（问题#1已解决） | ✅/❌ | ... | ... |
| 2D轨迹渲染 | ✅ 已验证 | ✅/❌ | ... | ... |
| 轨迹点资讯弹窗 | ✅ 已验证（问题#3已解决） | ✅/❌ | ... | ... |

### 未测试功能验证结果

| 功能点 | TEST_REPORT 状态 | 本次验证结果 | 发现 |
|--------|-----------------|-------------|------|
| 3D轨迹视图详细功能 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 多只鸽子同时轨迹比较 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 雷达模式 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 时速表显示 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 轨迹动画播放控制 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 鸽舍列表功能 | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 搜寻功能（环号/名次） | ⏳ 未测试 | ✅/❌/⏭️ | ... |
| 不同年份赛事切换 | ⏳ 未测试 | ✅/❌/⏭️ | ... |

### 已知问题验证结果

| 问题 | TEST_REPORT 解决方案 | 本次验证 | 是否仍有效 |
|-----|---------------------|---------|-----------|
| 问题#1: 2D轨迹初次载入失败 | 3D→2D切换序列 | ✅/❌ | ✅/❌ |
| 问题#2: 动态/静态模式混淆 | 检查标记数量 | ✅/❌ | ✅/❌ |
| 问题#3: 轨迹点点击无响应 | 使用正确选择器 | ✅/❌ | ✅/❌ |
| 问题#4: 数据载入时序问题 | 增加等待和重试 | ✅/❌ | ✅/❌ |
```

---

### 对比表 2: vs TEST_CASES.md

```markdown
## 对比 TEST_CASES.md

| 测试用例 | 优先级 | 可执行性 | 执行结果 | 问题记录 | 建议 |
|---------|--------|---------|----------|---------|------|
| **TC-01: 赛事列表测试** | | | | | |
| TC-01-001 | P1 | ✅ 可执行 | ✅/❌/⏭️ | ... | ... |
| TC-01-002 | P1 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| TC-01-003 | P1 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| TC-01-004 | P1 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| TC-01-005 | P2 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| **TC-02: 2D静态轨迹测试** | | | | | |
| TC-02-001 | P0 | ✅ 可执行 | ✅/❌/⏭️ | ... | ... |
| TC-02-002 | P0 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| ... | ... | ... | ... | ... | ... |
| **TC-03: 2D动画播放测试** | | | | | |
| TC-03-001 | P0 | ✅/❌ | ✅/❌/⏭️ | ... | ... |
| ... | ... | ... | ... | ... | ... |

### 统计摘要
- **总测试用例**: 35+
- **可执行**: X (X%)
- **不可执行**: X (X%) - 原因: 功能不存在/无法访问
- **已通过**: X (X%)
- **已失败**: X (X%)
- **已跳过**: X (X%)

### 可执行性分析
**不可执行用例**:
- TC-XX-XXX: 原因 - 功能不存在
- TC-XX-XXX: 原因 - 需要特殊权限

**需要修改的用例**:
- TC-XX-XXX: 建议 - 更新选择器
- TC-XX-XXX: 建议 - 调整验证方法
```

---

### 对比表 3: vs API_ENDPOINTS.md

```markdown
## 对比 API_ENDPOINTS.md

| API 端点 | 文档状态 | 本次发现 | URL 准确性 | 参数准确性 | 响应准确性 | 建议更新 |
|---------|---------|---------|-----------|-----------|-----------|---------|
| ugetPigeonAllJsonInfo | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| ugetPigeonGpsInfo | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| ugetPigeonGpx2d | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| ugetPigeonGpx3d | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| getRaceList | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| getRankingList | 已记录 | ✅ 确认存在 | ✅/❌ | ✅/❌ | ✅/❌ | ... |
| (新发现端点1) | 未记录 | 🆕 新发现 | - | - | - | 需添加 |
| (新发现端点2) | 未记录 | 🆕 新发现 | - | - | - | 需添加 |

### 新发现 API 端点详情
#### 1. [API 端点 URL]
- **用途**: 描述
- **方法**: GET/POST
- **参数**:
  - `param1`: 类型 - 描述
  - `param2`: 类型 - 描述
- **响应示例**:
  ```json
  {
    "code": 0,
    "data": {...}
  }
  ```
```

---

### 对比表 4: vs HELPER_FUNCTIONS_DESIGN.md

```markdown
## 对比 HELPER_FUNCTIONS_DESIGN.md

| 辅助函数 | 文档设计 | 实际需求 | 是否匹配 | 建议修改 |
|---------|---------|---------|---------|---------|
| switchTo2DMode() | 已设计 | 实际使用 | ✅/❌ | ... |
| ensureStaticMode() | 已设计 | 实际使用 | ✅/❌ | ... |
| clickTrajectoryPoint() | 已设计 | 实际使用 | ✅/❌ | ... |
| waitForMapTilesLoad() | 已设计 | 实际使用 | ✅/❌ | ... |
| ... | ... | ... | ... | ... |

### 建议新增辅助函数
1. **函数名**: `xxxxx()`
   - **用途**: 描述
   - **原因**: 在测试中多次使用，建议封装
   - **参数**: ...
   - **返回值**: ...
```

---

## 🆕 新发现清单

### 功能发现
```markdown
**新功能 1**: [功能名称]
- **位置**: 描述在哪里发现
- **操作方法**: 如何触发
- **用途**: 功能作用
- **截图**: `screenshots/phase3/new-feature-xxx.png`
- **建议测试用例**: 应添加到 TC-XX

**新功能 2**: [功能名称]
- ...
```

### 问题发现
```markdown
**新问题 1**: [问题标题]
- **严重程度**: 🔴 高 / 🟡 中 / 🟢 低
- **发现于**: TC-XX-XXX 或 Phase X
- **现象**: 详细描述
- **复现步骤**: ...
- **影响范围**: ...
- **建议**: 应添加到 KNOWN_ISSUES_SOLUTIONS.md

**新问题 2**: [问题标题]
- ...
```

### UI/UX 发现
```markdown
**观察 1**: [描述]
- 可能影响测试的 UI 行为
- 建议更新选择器或等待策略

**观察 2**: [描述]
- ...
```

---

## ⏱️ 时间管理策略

### 执行时间分配（总计 30-45 分钟）

| 阶段 | 预计时间 | 优先级 | 必须完成 |
|-----|---------|--------|---------|
| Phase 1 | 5-8 分钟 | P0 | ✅ 是 |
| Phase 2: TC-01, TC-02 | 5 分钟 | P1 | ✅ 是 |
| Phase 2: TC-03 | 7-10 分钟 | P0 | ✅ 是 |
| Phase 2: TC-04 | 8-10 分钟 | P0 | 🟡 尽量 |
| Phase 2: TC-05 | 5 分钟 | P1 | 🟡 尽量 |
| Phase 2: TC-06, TC-07 | 5 分钟 | P2 | ❌ 可选 |
| Phase 3 | 10-15 分钟 | P2 | ❌ 可选 |

### 如果时间超过 30 分钟

**策略**: 先完成阶段测试并汇整文件，以待下次通过文件接续未完成的测试任务

**执行顺序**:
1. ✅ 必须完成 Phase 1
2. ✅ 必须完成 Phase 2: TC-01, TC-02, TC-03
3. 🟡 尽量完成 Phase 2: TC-04
4. 🟡 尽量完成 Phase 2: TC-05
5. ❌ 如果时间不足，跳过 TC-06, TC-07
6. ❌ 如果时间不足，跳过 Phase 3

**记录进度**:
```markdown
## 测试进度记录 (v1.0.0)

**执行日期**: 2025-11-17
**执行时间**: HH:MM - HH:MM (总计 XX 分钟)

### 完成状态
- [x] Phase 1: 验证已测试流程 ✅ 完成
- [x] Phase 2: TC-01 赛事列表测试 ✅ 完成
- [x] Phase 2: TC-02 2D静态轨迹测试 ✅ 完成
- [x] Phase 2: TC-03 2D动画播放测试 ✅ 完成
- [ ] Phase 2: TC-04 3D轨迹播放测试 ⏸️ 待续 (完成 3/6)
- [ ] Phase 2: TC-05 鸽舍列表测试 📋 计划中
- [ ] Phase 2: TC-06 轨迹详情测试 📋 计划中
- [ ] Phase 2: TC-07 UI元素综合测试 📋 计划中
- [ ] Phase 3: 探索未记录功能 📋 计划中

### 下次接续计划
**从这里开始**: Phase 2 - TC-04-004 视角切换功能

**剩余测试项**:
- TC-04-004 到 TC-04-006 (3 个用例)
- TC-05 全部 (4 个用例)
- TC-06 全部 (4 个用例)
- TC-07 全部 (6 个用例)
- Phase 3 全部

**预计需要时间**: 20-25 分钟
```

---

## 📄 最终输出报告格式

报告文件名: `EXPLORATION_REPORT_v1.0.0_YYYYMMDD.md`

### 报告结构

```markdown
# Skyracing.com.cn 自动化探索报告

## 执行信息
- **报告版本**: v1.0.0
- **执行日期**: 2025-11-17
- **执行时间**: HH:MM - HH:MM (总计 XX 分钟)
- **执行环境**: Playwright MCP + Chrome
- **参考计划**: AUTOMATED_EXPLORATION_PLAN.md v1.0.0

---

## 📊 执行摘要

### 统计数据
- **总测试数**: X
- **通过**: X (X%)
- **失败**: X (X%)
- **跳过**: X (X%)
- **新发现**: X (功能 X, 问题 X, API X)

### 整体评估
**测试结果**: ✅ Pass / ❌ Fail / 🟡 Partial

**关键发现**:
1. ...
2. ...
3. ...

**主要问题**:
1. ...
2. ...

---

## 🎯 Phase 1: 验证已测试流程

### 总体结果
- **状态**: ✅ 完成 / 🟡 部分完成 / ❌ 失败
- **执行时间**: XX 分钟
- **通过率**: X/5 (X%)

### 步骤 1: 开启网站并进入赛事
- **执行时间**: XX 秒
- **状态**: ✅ 通过
- **详细记录**:
  - 导航到 https://skyracing.com.cn/
  - 页面加载时间: XX ms
  - 赛事卡片数量: X 个
  - 截图: `screenshots/phase1/step1-homepage.png`

[... 每个步骤的详细记录 ...]

### Phase 1 vs TEST_REPORT.md 对比
[插入对比表 1]

### 新发现问题
- 问题 #X: ...

---

## 🎯 Phase 2: 执行计划测试用例

### TC-01: 赛事列表测试
- **总体状态**: ✅ 完成 (5/5)
- **执行时间**: XX 分钟

#### TC-01-001: 首页加载验证 ✅
[详细记录...]

#### TC-01-002: 赛事搜寻功能 ✅
[详细记录...]

[... 所有测试用例的详细记录 ...]

---

## 🎯 Phase 3: 探索未记录功能

[如果执行了 Phase 3]

### 新功能发现
1. **功能名称**: ...
   [详细信息]

### 新 UI 元素发现
1. **元素描述**: ...

---

## 📊 对比分析

### 对比 TEST_REPORT.md
[插入完整的对比表 1]

### 对比 TEST_CASES.md
[插入完整的对比表 2]

### 对比 API_ENDPOINTS.md
[插入完整的对比表 3]

### 对比 HELPER_FUNCTIONS_DESIGN.md
[插入完整的对比表 4]

---

## 🆕 新发现清单

### 功能发现 (X 项)
1. **新功能 1**: ...
2. **新功能 2**: ...

### 问题发现 (X 项)
1. **新问题 1**: ...
2. **新问题 2**: ...

### API 发现 (X 项)
1. **新端点 1**: ...

### UI/UX 发现 (X 项)
1. **观察 1**: ...

---

## 📝 文档更新建议

### 需要更新的文档

#### TEST_REPORT.md
**建议更新**:
- [ ] 更新已验证流程的执行结果
- [ ] 添加新发现的问题 #X
- [ ] 更新已知问题的验证状态
- [ ] 添加未测试功能的验证结果

**具体修改**:
```markdown
第 XX 行:
- 旧内容: ...
+ 新内容: ...
```

#### TEST_CASES.md
**建议更新**:
- [ ] 标记不可执行的用例
- [ ] 修正测试步骤（TC-XX-XXX）
- [ ] 添加新测试用例（新功能）
- [ ] 更新选择器（TC-XX-XXX）

**具体修改**:
```markdown
TC-XX-XXX:
- 旧选择器: 'button:has-text("xxx")'
+ 新选择器: 'button[aria-label="xxx"]'
```

#### API_ENDPOINTS.md
**建议更新**:
- [ ] 添加新发现的 API 端点
- [ ] 修正现有端点的参数说明
- [ ] 更新响应示例

**具体修改**:
```markdown
新增端点:
### X. [API 端点名称]
...
```

#### KNOWN_ISSUES_SOLUTIONS.md
**建议更新**:
- [ ] 添加新发现的问题 #X
- [ ] 更新已知问题的解决方案有效性

#### HELPER_FUNCTIONS_DESIGN.md
**建议更新**:
- [ ] 添加建议的新辅助函数
- [ ] 修正现有函数的设计

---

## 🔍 深度分析

### 文档准确性评估

| 文档 | 准确性 | 可执行性 | 完整性 | 评级 |
|-----|--------|---------|--------|------|
| TEST_REPORT.md | X% | - | X% | A/B/C |
| TEST_CASES.md | X% | X% | X% | A/B/C |
| API_ENDPOINTS.md | X% | - | X% | A/B/C |
| HELPER_FUNCTIONS_DESIGN.md | X% | - | X% | A/B/C |

### 测试覆盖率分析

**已覆盖功能** (X%):
- ✅ 首页加载
- ✅ 赛事列表
- ✅ 2D 静态轨迹
- ...

**未覆盖功能** (X%):
- ❌ 雷达模式
- ❌ 某某功能
- ...

**部分覆盖功能** (X%):
- 🟡 3D 轨迹播放（基础功能已测试，高级功能未测试）
- ...

---

## ⚠️ 优先修复问题

### 高优先级 (Critical)
1. **[问题 #X]**: 标题
   - 影响: ...
   - 建议: ...

### 中优先级 (High)
1. **[问题 #X]**: 标题
   - 影响: ...
   - 建议: ...

### 低优先级 (Medium)
1. **[问题 #X]**: 标题
   - 影响: ...
   - 建议: ...

---

## 💡 建议和总结

### 测试策略建议
1. ...
2. ...

### 文档改进建议
1. ...
2. ...

### 工具和流程建议
1. ...
2. ...

### 下次测试重点
- [ ] 未完成的测试项
- [ ] 需要深入测试的功能
- [ ] 需要修复后重测的问题

---

## 📎 附录

### A. 截图索引
[列出所有截图文件]

### B. 网络请求日志
[API 调用汇总]

### C. 控制台日志
[错误和警告汇总]

### D. 测试进度记录
[如果有未完成的部分，详细记录进度]

---

**报告生成时间**: 2025-11-17 HH:MM:SS
**报告生成器**: Playwright MCP Automation
**下次更新**: 待续测试完成后
```

---

## 🎯 成功标准

此探索任务被认为**成功完成**，需满足以下条件：

### 必须达成 (Must Have)
1. ✅ Phase 1 完全执行并详细记录
2. ✅ Phase 2 至少完成 50% 的 P0/P1 用例
3. ✅ 所有错误都有详细记录和解决尝试
4. ✅ 生成完整的对比分析表（至少包含对比表 1 和 2）
5. ✅ 输出结构化的 Markdown 报告

### 期望达成 (Should Have)
1. 🎯 Phase 2 完成 80% 以上的 P0/P1 用例
2. 🎯 发现至少 3 个文档遗漏或不准确之处
3. 🎯 所有对比表完整生成（4 个表格）
4. 🎯 新发现清单包含至少 5 项内容

### 加分项 (Nice to Have)
1. ⭐ 完成 Phase 3 探索
2. ⭐ 发现未记录的 API 端点
3. ⭐ 发现新的隐藏功能
4. ⭐ 提供详细的文档更新建议（具体到行号）

---

## 📌 重要提醒

### 测试原则
1. **深入测试每个功能** - 不只是验证通过，要理解行为
2. **遇到错误先查文档** - 参考 KNOWN_ISSUES_SOLUTIONS.md
3. **无法解决则记录并继续** - 不要卡在单一问题上
4. **时间有限优先完成阶段性工作** - 确保有可交付成果

### 记录原则
1. **详细记录操作步骤** - 必须可复现
2. **截图关键画面** - 特别是错误状态
3. **记录网络请求** - 包含 URL、参数、响应
4. **记录控制台日志** - 特别是错误和警告

### 报告原则
1. **客观描述现象** - 不要猜测原因
2. **提供具体证据** - 截图、日志、代码
3. **给出明确建议** - 告诉如何改进文档
4. **标注优先级** - 哪些问题需要优先处理

---

## 🚀 执行检查清单

### 开始前
- [ ] 已阅读所有参考文档
- [ ] 理解三个 Phase 的执行范围
- [ ] 了解错误处理策略
- [ ] 准备好截图存储目录

### 执行中
- [ ] 每个测试步骤都有详细记录
- [ ] 遇到错误先查 KNOWN_ISSUES_SOLUTIONS.md
- [ ] 关键步骤进行截图
- [ ] 记录所有网络请求

### 完成后
- [ ] 生成 4 个对比分析表
- [ ] 填写新发现清单
- [ ] 提供文档更新建议
- [ ] 输出完整的 Markdown 报告
- [ ] 如有未完成，记录测试进度

---

## 📞 问题反馈

如果在执行过程中遇到计划未涵盖的情况：

1. **优先级判断**:
   - 🔴 Critical: 阻塞所有测试 → 停止并报告
   - 🟡 High: 阻塞部分测试 → 记录并跳过
   - 🟢 Low: 不阻塞测试 → 记录并继续

2. **记录格式**:
   ```markdown
   ## 计划外情况 #X
   **发现时间**: HH:MM
   **现象**: ...
   **处理决定**: ...
   **影响**: ...
   ```

3. **继续执行**: 基于优先级决定是否继续

---

**计划版本**: v1.0.0
**最后更新**: 2025-11-17
**下次审查**: 测试执行完成后

**准备就绪，可以开始执行！** 🚀
