# 功能清單

**專案**：鴿子競賽 GPS 追蹤系統
**最後更新**：2025-12-02
**版本**：2.0
**更新內容**：基於 DevTools MCP 互動式記錄完善

---

## 📖 目的

本文檔列出鴿子競賽 GPS 追蹤系統的所有功能模組，按優先級（P0/P1/P2）和功能領域分類。這份清單將用於：
- 指導測試案例設計
- 確定開發和測試優先級
- 追蹤功能覆蓋率
- 評估系統完整性

---

## 🎯 功能分類架構

```
鴿子競賽 GPS 追蹤系統
├── 賽事管理功能
│   ├── 賽事列表查看
│   ├── 賽事搜尋和篩選
│   └── 賽事詳情查看
├── 軌跡查看功能
│   ├── 2D 模式
│   │   ├── 靜態軌跡顯示
│   │   └── 動態播放
│   └── 3D 模式
│       ├── 3D 地球渲染
│       └── 視角切換
├── 鴿子管理功能
│   ├── 鴿子列表查看
│   ├── 鴿子搜尋（環號/排名）
│   ├── 鴿子選擇（多選）
│   └── 鴿舍管理
├── 數據顯示功能
│   ├── 飛行數據展示
│   ├── 排名資訊
│   └── 軌跡表格數據
└── UI 互動功能
    ├── 地圖互動
    ├── 軌跡點互動
    └── 播放控制
```

---

## 🔴 P0 功能（核心功能 - 必須正常運作）

### 1. 賽事管理核心功能

#### F-01-001：顯示賽事列表
- **描述**：在首頁顯示所有可用的賽事，包含賽事名稱、比賽階段、完整名稱
- **重要性**：系統入口，用戶必須能看到賽事列表才能進行後續操作
- **對應測試**：TC-01-001
- **用戶角色**：所有用戶
- **優先級原因**：無此功能則系統無法使用

#### F-01-002：進入賽事詳情
- **描述**：點擊賽事卡片的「進入」按鈕，進入該賽事的詳情頁面
- **重要性**：核心導航功能
- **對應測試**：TC-01-004
- **用戶角色**：所有用戶
- **優先級原因**：查看軌跡的前置步驟

#### F-01-003：年份篩選
- **描述**：通過年份下拉選單篩選賽事（2025, 2024, 2023...）
- **重要性**：賽事數量多時的必要篩選功能
- **對應測試**：TC-01-003
- **用戶角色**：所有用戶
- **優先級原因**：提升查找效率

### 2. 鴿子管理核心功能

#### F-02-001：顯示鴿子列表
- **描述**：在賽事詳情頁顯示所有參賽鴿子的列表（排名 + 環號）
- **重要性**：用戶需要看到所有鴿子才能選擇
- **對應測試**：TC-03-008（選擇前置）
- **用戶角色**：所有用戶
- **優先級原因**：核心數據展示

#### F-02-002：選擇鴿子（單選/多選）
- **描述**：通過 checkbox 選擇一只或多只鴿子
- **重要性**：查看軌跡的必要前置操作
- **對應測試**：TC-03-008
- **用戶角色**：所有用戶
- **優先級原因**：無法選擇則無法查看軌跡

#### F-02-003：環號搜尋
- **描述**：通過輸入環號快速找到特定鴿子
- **重要性**：鴿主記得環號，需要快速定位
- **對應測試**：（待補充）
- **用戶角色**：賽鴿愛好者
- **優先級原因**：高頻使用場景

### 3. 軌跡查看核心功能

#### F-03-001：2D 靜態軌跡顯示
- **描述**：在 2D 地圖上顯示鴿子的完整飛行軌跡線（AMap 2.0）
- **重要性**：核心功能，用戶主要訴求
- **對應測試**：TC-02-001 至 TC-02-006
- **用戶角色**：所有用戶
- **優先級原因**：系統存在的主要價值
- **技術細節**：
  - 使用 AMap 2.0 渲染
  - 軌跡線為 Polyline
  - 標記點為 Marker（15-20 個點）

#### F-03-002：3D 軌跡顯示
- **描述**：在 3D 地球上顯示鴿子的飛行軌跡
- **重要性**：提供立體視覺效果，增強用戶體驗
- **對應測試**：TC-04-001 至 TC-04-006
- **用戶角色**：所有用戶
- **優先級原因**：差異化功能，視覺吸引力強
- **技術細節**：
  - 使用 Cesium 渲染
  - 等待 `window.Cesium` 和 `viewer.scene.globe.tilesLoaded`

#### F-03-003：查看軌跡按鈕
- **描述**：點擊「查看軌跡」按鈕進入軌跡查看頁面
- **重要性**：核心導航功能
- **對應測試**：TC-03-008
- **用戶角色**：所有用戶
- **優先級原因**：進入軌跡查看的唯一入口

#### F-03-004：2D/3D 模式選擇
- **描述**：通過模式按鈕的 checkbox 狀態決定進入哪個模式
- **重要性**：模式切換的核心邏輯
- **對應測試**：TC-03-008
- **用戶角色**：所有用戶
- **優先級原因**：直接影響用戶體驗
- **⚠️ 關鍵行為**：
  - 按鈕顯示「3D」→ 點擊進入 **3D 模式**
  - 按鈕顯示「2D」→ 點擊進入 **2D 模式**
  - 按鈕文字決定行為，非 checkbox 狀態！

### 4. 數據顯示核心功能

#### F-04-001：飛行數據展示
- **描述**：在軌跡查看頁面顯示關鍵飛行數據
- **重要性**：用戶需要看到成績和數據
- **對應測試**：TC-02-002, TC-04-002
- **用戶角色**：所有用戶
- **優先級原因**：查看軌跡的主要目的之一
- **包含數據**：
  - 平均分速 / 最高分速（m/min）
  - 平均高度 / 最大高度（m）
  - 實際距離 / 實際分速（km, m/min）
  - 直線距離 / 直線分速（km, m/min）
  - 起點時間 / 終點時間 / 持續時間

#### F-04-002：排名資訊顯示
- **描述**：顯示鴿子在賽事中的最終排名
- **重要性**：比賽結果的核心指標
- **對應測試**：TC-01-004
- **用戶角色**：所有用戶
- **優先級原因**：用戶最關心的資訊

---

## 🟡 P1 功能（重要功能 - 應正常運作）

### 5. 軌跡查看進階功能

#### F-05-001：2D 動態播放
- **描述**：在 2D 地圖上播放鴿子飛行的動畫過程
- **重要性**：增強視覺體驗，幫助理解飛行過程
- **對應測試**：TC-03-001 至 TC-03-007
- **用戶角色**：所有用戶
- **優先級原因**：非必需但大幅提升用戶體驗
- **技術細節**：
  - 標記點較少（1-3 個動態標記）
  - 有播放控制按鈕（播放、暫停、快進、快退）

#### F-05-002：靜態/動態模式切換
- **描述**：在 2D 模式中切換靜態軌跡和動態播放
- **重要性**：提供不同的查看方式
- **對應測試**：TC-03-001 至 TC-03-007
- **用戶角色**：所有用戶
- **優先級原因**：用戶可能有不同偏好

#### F-05-003：3D 視角切換
- **描述**：在 3D 模式中切換不同的視角（視角1、視角2）
- **重要性**：優化 3D 查看體驗
- **對應測試**：TC-04-003
- **用戶角色**：使用 3D 模式的用戶
- **優先級原因**：3D 模式的重要輔助功能

#### F-05-004：顯示/隱藏軌跡點
- **描述**：切換軌跡上標記點的顯示狀態
- **重要性**：控制視覺複雜度
- **對應測試**：TC-04-004
- **用戶角色**：使用 3D 模式的用戶
- **優先級原因**：視覺優化功能

#### F-05-005：顯示/隱藏歸返軌跡
- **描述**：切換歸返路徑的顯示狀態
- **重要性**：聚焦關鍵飛行階段
- **對應測試**：TC-04-005
- **用戶角色**：使用 3D 模式的用戶
- **優先級原因**：數據篩選功能

### 6. 軌跡互動功能

#### F-06-001：軌跡點點擊查看詳情
- **描述**：點擊軌跡上的標記點，顯示該點的詳細數據（時間、速度、高度、距離）
- **重要性**：深度分析需求
- **對應測試**：TC-06-001 至 TC-06-004
- **用戶角色**：賽鴿愛好者（分析需求）
- **優先級原因**：進階分析功能
- **⚠️ 已知問題**：需使用 accessibility tree locator

#### F-06-002：軌跡表格數據
- **描述**：以表格形式展示所有軌跡點的數據
- **重要性**：提供結構化數據視圖
- **對應測試**：（待補充）
- **用戶角色**：賽鴿愛好者
- **優先級原因**：數據分析輔助

### 7. 鴿舍管理功能

#### F-07-001：鴿舍列表查看
- **描述**：切換到「鴿舍列表」標籤，查看按鴿舍分組的鴿子
- **重要性**：組織化查看鴿子
- **對應測試**：TC-05-001, TC-05-002
- **用戶角色**：賽鴿愛好者
- **優先級原因**：管理多只鴿子的需求

#### F-07-002：鴿舍篩選
- **描述**：通過下拉選單選擇特定鴿舍
- **重要性**：快速定位自己的鴿舍
- **對應測試**：TC-05-001
- **用戶角色**：賽鴿愛好者
- **優先級原因**：鴿舍管理的核心功能

#### F-07-003：鴿舍內環號搜尋
- **描述**：在特定鴿舍內搜尋環號
- **重要性**：精確定位鴿子
- **對應測試**：TC-05-003
- **用戶角色**：賽鴿愛好者
- **優先級原因**：結合鴿舍的快速搜尋

### 8. 賽事管理進階功能

#### F-08-001：賽事搜尋
- **描述**：通過關鍵字搜尋賽事名稱
- **重要性**：賽事多時的快速查找
- **對應測試**：TC-01-002
- **用戶角色**：所有用戶
- **優先級原因**：提升查找效率

#### F-08-002：退出賽事
- **描述**：從賽事詳情頁返回首頁
- **重要性**：基本導航功能
- **對應測試**：（待補充）
- **用戶角色**：所有用戶
- **優先級原因**：導航完整性

---

## 🟢 P2 功能（次要功能 - 可選）

### 9. UI 元素和視覺優化

#### F-09-001：排名榜顯示/隱藏
- **描述**：切換排名榜的顯示狀態
- **重要性**：視覺空間優化
- **對應測試**：TC-07-001
- **用戶角色**：所有用戶
- **優先級原因**：視覺優化，非核心

#### F-09-002：時速表顯示/隱藏
- **描述**：切換時速表的顯示狀態
- **重要性**：視覺空間優化
- **對應測試**：TC-07-002
- **用戶角色**：所有用戶
- **優先級原因**：視覺優化，非核心

#### F-09-003：地圖瓦片切換
- **描述**：切換地圖底圖樣式（衛星圖、街道圖等）
- **重要性**：視覺偏好
- **對應測試**：TC-07-003
- **用戶角色**：所有用戶
- **優先級原因**：個性化功能

#### F-09-004：雷達模式 (已完整記錄)
- **描述**：追蹤整場賽事所有鴿子的飛行過程，提供全局視角和統計
- **重要性**：進階分析功能，適合賽事主辦方和專業分析者
- **對應測試**：TC-07-004
- **用戶角色**：賽事主辦方、專業分析者
- **優先級原因**：需下載大量數據 (100-300MB)，使用門檻高
- **功能細節**：
  - 確認對話框：警告流量消耗和等待時間
  - 下載過程：可取消，顯示進度
  - 全賽事鴿子列表：卡片式顯示，含起跑/最終名次
  - 距離里程碑統計：50KM~300KM 完成率
  - 36+ 小時時間軸：回放整場賽事
  - 搜尋功能：快速定位特定鴿子

### 10. 多鴿子管理

#### F-10-001：勾選清單 (已完整記錄)
- **描述**：展開式面板，顯示和管理已選擇的鴿子
- **重要性**：管理多選狀態，快速移除不需要的選擇
- **對應測試**：TC-07-005
- **用戶角色**：需要比較多只鴿子的用戶
- **優先級原因**：多選輔助功能
- **功能細節**：
  - 展開/收起按鈕：`button "勾选清单 N"` (N=已選數量)
  - 顯示內容：排名、環號、舍號
  - 單個刪除：移除特定鴿子
  - 全部刪除：清空整個勾選清單

#### F-10-002：多鴿子軌跡比較
- **描述**：同時顯示多只鴿子的軌跡進行比較
- **重要性**：進階分析需求
- **對應測試**：（待補充）
- **用戶角色**：賽鴿愛好者（高級用戶）
- **優先級原因**：進階功能，開發成本高

### 11. 名次查詢

#### F-11-001：按名次查詢鴿子
- **描述**：輸入名次數字快速定位該排名的鴿子
- **重要性**：了解特定排名的鴿子
- **對應測試**：TC-01-005
- **用戶角色**：所有用戶
- **優先級原因**：偶爾使用的輔助功能

### 12. 新發現功能 (2025-12-02 記錄)

#### F-12-001：InfoWindow 資訊窗口
- **描述**：點擊 2D 軌跡標記點後顯示的彈出資訊窗
- **重要性**：查看單點詳細數據
- **對應測試**：TC-06-001
- **用戶角色**：所有用戶
- **優先級原因**：軌跡互動的核心功能
- **顯示內容**：
  - 環號
  - 時間
  - 海拔 (m)
  - 分速 (m/min)
- **選擇器**：`.amap-info-window`

#### F-12-002：風場顯示
- **描述**：在 2D 地圖上顯示風向風速覆蓋層
- **重要性**：幫助分析飛行條件
- **對應測試**：（待補充）
- **用戶角色**：專業分析者
- **優先級原因**：進階分析功能
- **控制按鈕**：`button description="查看风场"`
- **已知問題**：風場可能不完整顯示

#### F-12-003：距離測量工具
- **描述**：在地圖上拉線測量距離
- **重要性**：量化分析飛行路線
- **對應測試**：（待補充）
- **用戶角色**：專業分析者
- **優先級原因**：輔助分析工具
- **操作流程**：
  1. 點擊測量工具按鈕
  2. 在地圖上點擊建立測量點
  3. 顯示公里數
  4. 按 ESC 後點擊垃圾桶取消

#### F-12-004：航點列表「前往」功能
- **描述**：在軌跡詳情面板選取航點範圍後，點擊前往按鈕跳轉到該位置
- **重要性**：快速定位特定航點
- **對應測試**：（待補充）
- **用戶角色**：專業分析者
- **優先級原因**：進階導航功能
- **操作流程**：
  1. 開啟軌跡詳情面板
  2. 在航點列表中選取範圍
  3. 點擊「前往」按鈕
  4. 地圖聚焦到選取範圍

---

## 📊 功能統計

### 按優先級統計
| 優先級 | 功能數量 | 百分比 |
|--------|----------|--------|
| P0 | 13 | 35% |
| P1 | 13 | 35% |
| P2 | 11 | 30% |
| **總計** | **37** | **100%** |

### 按功能領域統計
| 功能領域 | 功能數量 | 包含優先級 |
|----------|----------|------------|
| 賽事管理 | 5 | P0(3), P1(2) |
| 鴿子管理 | 6 | P0(3), P1(3) |
| 軌跡查看 | 9 | P0(4), P1(5) |
| 數據顯示 | 3 | P0(2), P1(1) |
| UI 互動 | 10 | P1(2), P2(8) |
| 新發現功能 | 4 | P2(4) |
| **總計** | **37** | - |

### 測試覆蓋率
| 功能優先級 | 已有測試案例 | 待補充測試 |
|------------|--------------|------------|
| P0 | 13/13 (100%) | 0 |
| P1 | 11/13 (85%) | 2 |
| P2 | 5/11 (45%) | 6 |
| **總計** | **29/37 (78%)** | **8** |

> **2025-12-02 更新說明**：新增 4 個功能 (F-12-001 ~ F-12-004)，雷達模式和勾選清單功能已完整記錄

---

## 🔗 功能與測試案例映射

詳細的功能-測試映射請參考：
- [Feature-Test Mapping](../test-coverage/FEATURE_TEST_MAPPING.md) - 完整的功能與測試案例對應表

---

## ⚠️ 已知問題和限制

### 功能問題
| 功能 ID | 問題描述 | 影響範圍 | 解決方案文檔 |
|---------|----------|----------|--------------|
| F-03-001 | 2D 模式初次載入可能失敗 | P0 功能 | [Troubleshooting](../guides/troubleshooting.md#issue-1) |
| F-05-002 | 靜態/動態模式難以區分 | P1 功能 | [Mode Switching Guide](../guides/mode-switching.md) |
| F-06-001 | 軌跡點點擊響應問題 | P1 功能 | [Troubleshooting](../guides/troubleshooting.md#issue-3) |

### 功能缺口
- **多鴿子數據導出**：用戶可能需要將數據導出為 CSV/Excel（未實作）
- **歷史比賽回放**：查看過去賽季的比賽記錄（功能待確認）
- **個人化設置**：保存用戶的查看偏好（如默認 2D/3D 模式）

---

## 🔗 相關文檔

- [User Personas](../user-research/USER_PERSONAS.md) - 用戶角色和需求分析
- [Site Map](../information-architecture/SITE_MAP.md) - 頁面結構地圖
- [Test Cases](../test-plan/TEST_CASES.md) - 35+ 詳細測試案例
- [Test Framework](../architecture/test-framework.md) - 測試架構設計

---

**文檔維護者**：專案團隊
**審核狀態**：初版
**下次審核日期**：Phase 2 實作後
